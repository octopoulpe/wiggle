!function t(a,r,n){function o(u,i){if(!r[u]){if(!a[u]){var s="function"==typeof require&&require;if(!i&&s)return s(u,!0);if(e)return e(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var M=r[u]={exports:{}};a[u][0].call(M.exports,function(t){var r=a[u][1][t];return o(r?r:t)},M,M.exports,t,a,r,n)}return r[u].exports}for(var e="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,a,r){r.glMatrix=t("./gl-matrix/common.js"),r.mat2=t("./gl-matrix/mat2.js"),r.mat2d=t("./gl-matrix/mat2d.js"),r.mat3=t("./gl-matrix/mat3.js"),r.mat4=t("./gl-matrix/mat4.js"),r.quat=t("./gl-matrix/quat.js"),r.vec2=t("./gl-matrix/vec2.js"),r.vec3=t("./gl-matrix/vec3.js"),r.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":2,"./gl-matrix/mat2.js":3,"./gl-matrix/mat2d.js":4,"./gl-matrix/mat3.js":5,"./gl-matrix/mat4.js":6,"./gl-matrix/quat.js":7,"./gl-matrix/vec2.js":8,"./gl-matrix/vec3.js":9,"./gl-matrix/vec4.js":10}],2:[function(t,a,r){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var o=Math.PI/180;n.toRadian=function(t){return t*o},n.equals=function(t,a){return Math.abs(t-a)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},a.exports=n},{}],3:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,a,r,o){var e=new n.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=o,e},o.set=function(t,a,r,n,o){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t},o.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=r*e-o*n;return u?(u=1/u,t[0]=e*u,t[1]=-n*u,t[2]=-o*u,t[3]=r*u,t):null},o.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=r[0],s=r[1],l=r[2],M=r[3];return t[0]=n*i+e*s,t[1]=o*i+u*s,t[2]=n*l+e*M,t[3]=o*l+u*M,t},o.mul=o.multiply,o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=Math.sin(r),s=Math.cos(r);return t[0]=n*s+e*i,t[1]=o*s+u*i,t[2]=n*-i+e*s,t[3]=o*-i+u*s,t},o.scale=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=r[0],s=r[1];return t[0]=n*i,t[1]=o*i,t[2]=e*s,t[3]=u*s,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},o.sub=o.subtract,o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=t[3],i=a[0],s=a[1],l=a[2],M=a[3];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},a.exports=o},{"./common.js":2}],4:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,a,r,o,e,u){var i=new n.ARRAY_TYPE(6);return i[0]=t,i[1]=a,i[2]=r,i[3]=o,i[4]=e,i[5]=u,i},o.set=function(t,a,r,n,o,e,u){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=u,t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=r*e-n*o;return s?(s=1/s,t[0]=e*s,t[1]=-n*s,t[2]=-o*s,t[3]=r*s,t[4]=(o*i-e*u)*s,t[5]=(n*u-r*i)*s,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=r[0],M=r[1],h=r[2],c=r[3],f=r[4],x=r[5];return t[0]=n*l+e*M,t[1]=o*l+u*M,t[2]=n*h+e*c,t[3]=o*h+u*c,t[4]=n*f+e*x+i,t[5]=o*f+u*x+s,t},o.mul=o.multiply,o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=Math.sin(r),M=Math.cos(r);return t[0]=n*M+e*l,t[1]=o*M+u*l,t[2]=n*-l+e*M,t[3]=o*-l+u*M,t[4]=i,t[5]=s,t},o.scale=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=r[0],M=r[1];return t[0]=n*l,t[1]=o*l,t[2]=e*M,t[3]=u*M,t[4]=i,t[5]=s,t},o.translate=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=r[0],M=r[1];return t[0]=n,t[1]=o,t[2]=e,t[3]=u,t[4]=n*l+e*M+i,t[5]=o*l+u*M+s,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=t[3],i=t[4],s=t[5],l=a[0],M=a[1],h=a[2],c=a[3],f=a[4],x=a[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-M)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(e-h)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(u-c)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-x)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))},a.exports=o},{"./common.js":2}],5:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},o.clone=function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromValues=function(t,a,r,o,e,u,i,s,l){var M=new n.ARRAY_TYPE(9);return M[0]=t,M[1]=a,M[2]=r,M[3]=o,M[4]=e,M[5]=u,M[6]=i,M[7]=s,M[8]=l,M},o.set=function(t,a,r,n,o,e,u,i,s,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=u,t[6]=i,t[7]=s,t[8]=l,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],o=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=o}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=a[6],l=a[7],M=a[8],h=M*u-i*l,c=-M*e+i*s,f=l*e-u*s,x=r*h+n*c+o*f;return x?(x=1/x,t[0]=h*x,t[1]=(-M*n+o*l)*x,t[2]=(i*n-o*u)*x,t[3]=c*x,t[4]=(M*r-o*s)*x,t[5]=(-i*r+o*e)*x,t[6]=f*x,t[7]=(-l*r+n*s)*x,t[8]=(u*r-n*e)*x,t):null},o.adjoint=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=a[6],l=a[7],M=a[8];return t[0]=u*M-i*l,t[1]=o*l-n*M,t[2]=n*i-o*u,t[3]=i*s-e*M,t[4]=r*M-o*s,t[5]=o*e-r*i,t[6]=e*l-u*s,t[7]=n*s-r*l,t[8]=r*u-n*e,t},o.determinant=function(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],u=t[5],i=t[6],s=t[7],l=t[8];return a*(l*e-u*s)+r*(-l*o+u*i)+n*(s*o-e*i)},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=a[6],M=a[7],h=a[8],c=r[0],f=r[1],x=r[2],m=r[3],S=r[4],I=r[5],D=r[6],d=r[7],F=r[8];return t[0]=c*n+f*u+x*l,t[1]=c*o+f*i+x*M,t[2]=c*e+f*s+x*h,t[3]=m*n+S*u+I*l,t[4]=m*o+S*i+I*M,t[5]=m*e+S*s+I*h,t[6]=D*n+d*u+F*l,t[7]=D*o+d*i+F*M,t[8]=D*e+d*s+F*h,t},o.mul=o.multiply,o.translate=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=a[6],M=a[7],h=a[8],c=r[0],f=r[1];return t[0]=n,t[1]=o,t[2]=e,t[3]=u,t[4]=i,t[5]=s,t[6]=c*n+f*u+l,t[7]=c*o+f*i+M,t[8]=c*e+f*s+h,t},o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=a[6],M=a[7],h=a[8],c=Math.sin(r),f=Math.cos(r);return t[0]=f*n+c*u,t[1]=f*o+c*i,t[2]=f*e+c*s,t[3]=f*u-c*n,t[4]=f*i-c*o,t[5]=f*s-c*e,t[6]=l,t[7]=M,t[8]=h,t},o.scale=function(t,a,r){var n=r[0],o=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=o*a[3],t[4]=o*a[4],t[5]=o*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},o.fromQuat=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=r+r,i=n+n,s=o+o,l=r*u,M=n*u,h=n*i,c=o*u,f=o*i,x=o*s,m=e*u,S=e*i,I=e*s;return t[0]=1-h-x,t[3]=M-I,t[6]=c+S,t[1]=M+I,t[4]=1-l-x,t[7]=f-m,t[2]=c-S,t[5]=f+m,t[8]=1-l-h,t},o.normalFromMat4=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=a[6],l=a[7],M=a[8],h=a[9],c=a[10],f=a[11],x=a[12],m=a[13],S=a[14],I=a[15],D=r*i-n*u,d=r*s-o*u,F=r*l-e*u,p=n*s-o*i,v=n*l-e*i,b=o*l-e*s,g=M*m-h*x,_=M*S-c*x,E=M*I-f*x,A=h*S-c*m,w=h*I-f*m,y=c*I-f*S,z=D*y-d*w+F*A+p*E-v*_+b*g;return z?(z=1/z,t[0]=(i*y-s*w+l*A)*z,t[1]=(s*E-u*y-l*_)*z,t[2]=(u*w-i*E+l*g)*z,t[3]=(o*w-n*y-e*A)*z,t[4]=(r*y-o*E+e*_)*z,t[5]=(n*E-r*w-e*g)*z,t[6]=(m*b-S*v+I*p)*z,t[7]=(S*F-x*b-I*d)*z,t[8]=(x*v-m*F+I*D)*z,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=t[3],i=t[4],s=t[5],l=t[6],M=t[7],h=t[8],c=a[0],f=a[1],x=a[2],m=a[3],S=a[4],I=a[5],D=t[6],d=a[7],F=a[8];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(e-x)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(i-S)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(s-I)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-D)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(M-d)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(d))&&Math.abs(h-F)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))},a.exports=o},{"./common.js":2}],6:[function(t,a,r){var n=t("./common.js"),o={scalar:{},SIMD:{}};o.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var a=new n.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.fromValues=function(t,a,r,o,e,u,i,s,l,M,h,c,f,x,m,S){var I=new n.ARRAY_TYPE(16);return I[0]=t,I[1]=a,I[2]=r,I[3]=o,I[4]=e,I[5]=u,I[6]=i,I[7]=s,I[8]=l,I[9]=M,I[10]=h,I[11]=c,I[12]=f,I[13]=x,I[14]=m,I[15]=S,I},o.set=function(t,a,r,n,o,e,u,i,s,l,M,h,c,f,x,m,S){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=u,t[6]=i,t[7]=s,t[8]=l,t[9]=M,t[10]=h,t[11]=c,t[12]=f,t[13]=x,t[14]=m,t[15]=S,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],o=a[3],e=a[6],u=a[7],i=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=e,t[11]=a[14],t[12]=o,t[13]=u,t[14]=i}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},o.SIMD.transpose=function(t,a){var r,n,o,e,u,i,s,l,M,h;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.shuffle(r,n,0,1,4,5),i=SIMD.Float32x4.shuffle(o,e,0,1,4,5),s=SIMD.Float32x4.shuffle(u,i,0,2,4,6),l=SIMD.Float32x4.shuffle(u,i,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),u=SIMD.Float32x4.shuffle(r,n,2,3,6,7),i=SIMD.Float32x4.shuffle(o,e,2,3,6,7),M=SIMD.Float32x4.shuffle(u,i,0,2,4,6),h=SIMD.Float32x4.shuffle(u,i,1,3,5,7),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,h),t},o.transpose=n.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=a[6],l=a[7],M=a[8],h=a[9],c=a[10],f=a[11],x=a[12],m=a[13],S=a[14],I=a[15],D=r*i-n*u,d=r*s-o*u,F=r*l-e*u,p=n*s-o*i,v=n*l-e*i,b=o*l-e*s,g=M*m-h*x,_=M*S-c*x,E=M*I-f*x,A=h*S-c*m,w=h*I-f*m,y=c*I-f*S,z=D*y-d*w+F*A+p*E-v*_+b*g;return z?(z=1/z,t[0]=(i*y-s*w+l*A)*z,t[1]=(o*w-n*y-e*A)*z,t[2]=(m*b-S*v+I*p)*z,t[3]=(c*v-h*b-f*p)*z,t[4]=(s*E-u*y-l*_)*z,t[5]=(r*y-o*E+e*_)*z,t[6]=(S*F-x*b-I*d)*z,t[7]=(M*b-c*F+f*d)*z,t[8]=(u*w-i*E+l*g)*z,t[9]=(n*E-r*w-e*g)*z,t[10]=(x*v-m*F+I*D)*z,t[11]=(h*F-M*v-f*D)*z,t[12]=(i*_-u*A-s*g)*z,t[13]=(r*A-n*_+o*g)*z,t[14]=(m*d-x*p-S*D)*z,t[15]=(M*p-h*d+c*D)*z,t):null},o.SIMD.invert=function(t,a){var r,n,o,e,u,i,s,l,M,h,c=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),x=SIMD.Float32x4.load(a,8),m=SIMD.Float32x4.load(a,12);return u=SIMD.Float32x4.shuffle(c,f,0,1,4,5),n=SIMD.Float32x4.shuffle(x,m,0,1,4,5),r=SIMD.Float32x4.shuffle(u,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,u,1,3,5,7),u=SIMD.Float32x4.shuffle(c,f,2,3,6,7),e=SIMD.Float32x4.shuffle(x,m,2,3,6,7),o=SIMD.Float32x4.shuffle(u,e,0,2,4,6),e=SIMD.Float32x4.shuffle(e,u,1,3,5,7),u=SIMD.Float32x4.mul(o,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.mul(n,u),s=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),i),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.mul(n,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),i),M=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,u)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),i),l=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,u)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.mul(r,n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),l),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,u),M),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,u),l),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(o,u)),u=SIMD.Float32x4.mul(r,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,u)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),l),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.mul(r,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),s),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(e,u)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),M),h=SIMD.Float32x4.mul(r,i),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),u=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(u,u))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,i)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,M)),t):null},o.invert=n.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=a[4],i=a[5],s=a[6],l=a[7],M=a[8],h=a[9],c=a[10],f=a[11],x=a[12],m=a[13],S=a[14],I=a[15];return t[0]=i*(c*I-f*S)-h*(s*I-l*S)+m*(s*f-l*c),t[1]=-(n*(c*I-f*S)-h*(o*I-e*S)+m*(o*f-e*c)),t[2]=n*(s*I-l*S)-i*(o*I-e*S)+m*(o*l-e*s),t[3]=-(n*(s*f-l*c)-i*(o*f-e*c)+h*(o*l-e*s)),t[4]=-(u*(c*I-f*S)-M*(s*I-l*S)+x*(s*f-l*c)),t[5]=r*(c*I-f*S)-M*(o*I-e*S)+x*(o*f-e*c),t[6]=-(r*(s*I-l*S)-u*(o*I-e*S)+x*(o*l-e*s)),t[7]=r*(s*f-l*c)-u*(o*f-e*c)+M*(o*l-e*s),t[8]=u*(h*I-f*m)-M*(i*I-l*m)+x*(i*f-l*h),t[9]=-(r*(h*I-f*m)-M*(n*I-e*m)+x*(n*f-e*h)),t[10]=r*(i*I-l*m)-u*(n*I-e*m)+x*(n*l-e*i),t[11]=-(r*(i*f-l*h)-u*(n*f-e*h)+M*(n*l-e*i)),t[12]=-(u*(h*S-c*m)-M*(i*S-s*m)+x*(i*c-s*h)),t[13]=r*(h*S-c*m)-M*(n*S-o*m)+x*(n*c-o*h),t[14]=-(r*(i*S-s*m)-u*(n*S-o*m)+x*(n*s-o*i)),t[15]=r*(i*c-s*h)-u*(n*c-o*h)+M*(n*s-o*i),t},o.SIMD.adjoint=function(t,a){var r,n,o,e,u,i,s,l,M,h,c,f,x,r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12);return M=SIMD.Float32x4.shuffle(r,n,0,1,4,5),i=SIMD.Float32x4.shuffle(o,e,0,1,4,5),u=SIMD.Float32x4.shuffle(M,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,M,1,3,5,7),M=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(o,e,2,3,6,7),s=SIMD.Float32x4.shuffle(M,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,M,1,3,5,7),M=SIMD.Float32x4.mul(s,l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),h=SIMD.Float32x4.mul(i,M),c=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,M),h),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.mul(i,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),h),x=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,M)),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),x),x=SIMD.Float32x4.swizzle(x,2,3,0,1),M=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),h),f=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,M)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),M=SIMD.Float32x4.mul(u,i),M=SIMD.Float32x4.swizzle(M,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),f),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,M),x),M=SIMD.Float32x4.swizzle(M,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,M),f),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(s,M)),M=SIMD.Float32x4.mul(u,l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,M)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,M),f),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),c),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(i,M)),M=SIMD.Float32x4.mul(u,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),c),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(i,M)),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,M)),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,M),x),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,c),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,x),t},o.adjoint=n.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],u=t[5],i=t[6],s=t[7],l=t[8],M=t[9],h=t[10],c=t[11],f=t[12],x=t[13],m=t[14],S=t[15],I=a*u-r*e,D=a*i-n*e,d=a*s-o*e,F=r*i-n*u,p=r*s-o*u,v=n*s-o*i,b=l*x-M*f,g=l*m-h*f,_=l*S-c*f,E=M*m-h*x,A=M*S-c*x,w=h*S-c*m;return I*w-D*A+d*E+F*_-p*g+v*b},o.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.load(r,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),u))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(r,4),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),u))));SIMD.Float32x4.store(t,4,M);var h=SIMD.Float32x4.load(r,8),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),u))));SIMD.Float32x4.store(t,8,c);var f=SIMD.Float32x4.load(r,12),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),u))));return SIMD.Float32x4.store(t,12,x),t},o.scalar.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=a[6],M=a[7],h=a[8],c=a[9],f=a[10],x=a[11],m=a[12],S=a[13],I=a[14],D=a[15],d=r[0],F=r[1],p=r[2],v=r[3];return t[0]=d*n+F*i+p*h+v*m,t[1]=d*o+F*s+p*c+v*S,t[2]=d*e+F*l+p*f+v*I,t[3]=d*u+F*M+p*x+v*D,d=r[4],F=r[5],p=r[6],v=r[7],t[4]=d*n+F*i+p*h+v*m,t[5]=d*o+F*s+p*c+v*S,t[6]=d*e+F*l+p*f+v*I,t[7]=d*u+F*M+p*x+v*D,d=r[8],F=r[9],p=r[10],v=r[11],t[8]=d*n+F*i+p*h+v*m,t[9]=d*o+F*s+p*c+v*S,t[10]=d*e+F*l+p*f+v*I,t[11]=d*u+F*M+p*x+v*D,d=r[12],F=r[13],p=r[14],v=r[15],t[12]=d*n+F*i+p*h+v*m,t[13]=d*o+F*s+p*c+v*S,t[14]=d*e+F*l+p*f+v*I,t[15]=d*u+F*M+p*x+v*D,t},o.multiply=n.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,a,r){var n,o,e,u,i,s,l,M,h,c,f,x,m=r[0],S=r[1],I=r[2];return a===t?(t[12]=a[0]*m+a[4]*S+a[8]*I+a[12],t[13]=a[1]*m+a[5]*S+a[9]*I+a[13],t[14]=a[2]*m+a[6]*S+a[10]*I+a[14],t[15]=a[3]*m+a[7]*S+a[11]*I+a[15]):(n=a[0],o=a[1],e=a[2],u=a[3],i=a[4],s=a[5],l=a[6],M=a[7],h=a[8],c=a[9],f=a[10],x=a[11],t[0]=n,t[1]=o,t[2]=e,t[3]=u,t[4]=i,t[5]=s,t[6]=l,t[7]=M,t[8]=h,t[9]=c,t[10]=f,t[11]=x,t[12]=n*m+i*S+h*I+a[12],t[13]=o*m+s*S+c*I+a[13],t[14]=e*m+l*S+f*I+a[14],t[15]=u*m+M*S+x*I+a[15]),t},o.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,2,2,2,2));var s=SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,SIMD.Float32x4.add(e,u)));return SIMD.Float32x4.store(t,12,s),t},o.translate=n.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,a,r){var n=r[0],o=r[1],e=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.SIMD.scale=function(t,a,r){var n,o,e,u=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0))),o=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1))),e=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.scale=n.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,a,r,o){var e,u,i,s,l,M,h,c,f,x,m,S,I,D,d,F,p,v,b,g,_,E,A,w,y=o[0],z=o[1],T=o[2],R=Math.sqrt(y*y+z*z+T*T);return Math.abs(R)<n.EPSILON?null:(R=1/R,y*=R,z*=R,T*=R,e=Math.sin(r),u=Math.cos(r),i=1-u,s=a[0],l=a[1],M=a[2],h=a[3],c=a[4],f=a[5],x=a[6],m=a[7],S=a[8],I=a[9],D=a[10],d=a[11],F=y*y*i+u,p=z*y*i+T*e,v=T*y*i-z*e,b=y*z*i-T*e,g=z*z*i+u,_=T*z*i+y*e,E=y*T*i+z*e,A=z*T*i-y*e,w=T*T*i+u,t[0]=s*F+c*p+S*v,t[1]=l*F+f*p+I*v,t[2]=M*F+x*p+D*v,t[3]=h*F+m*p+d*v,t[4]=s*b+c*g+S*_,t[5]=l*b+f*g+I*_,t[6]=M*b+x*g+D*_,t[7]=h*b+m*g+d*_,t[8]=s*E+c*A+S*w,t[9]=l*E+f*A+I*w,t[10]=M*E+x*A+D*w,t[11]=h*E+m*A+d*w,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},o.scalar.rotateX=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[4],u=a[5],i=a[6],s=a[7],l=a[8],M=a[9],h=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+l*n,t[5]=u*o+M*n,t[6]=i*o+h*n,t[7]=s*o+c*n,t[8]=l*o-e*n,t[9]=M*o-u*n,t[10]=h*o-i*n,t[11]=c*o-s*n,t},o.SIMD.rotateX=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,4),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,o),SIMD.Float32x4.mul(e,n))),t},o.rotateX=n.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],u=a[1],i=a[2],s=a[3],l=a[8],M=a[9],h=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-l*n,t[1]=u*o-M*n,t[2]=i*o-h*n,t[3]=s*o-c*n,t[8]=e*n+l*o,t[9]=u*n+M*o,t[10]=i*n+h*o,t[11]=s*n+c*o,t},o.SIMD.rotateY=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,n),SIMD.Float32x4.mul(u,o))),t},o.rotateY=n.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],u=a[1],i=a[2],s=a[3],l=a[4],M=a[5],h=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+l*n,t[1]=u*o+M*n,t[2]=i*o+h*n,t[3]=s*o+c*n,t[4]=l*o-e*n,t[5]=M*o-u*n,t[6]=h*o-i*n,t[7]=c*o-s*n,t},o.SIMD.rotateZ=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,o),SIMD.Float32x4.mul(e,n))),t},o.rotateZ=n.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,a,r){var o,e,u,i=r[0],s=r[1],l=r[2],M=Math.sqrt(i*i+s*s+l*l);return Math.abs(M)<n.EPSILON?null:(M=1/M,i*=M,s*=M,l*=M,o=Math.sin(a),e=Math.cos(a),u=1-e,t[0]=i*i*u+e,t[1]=s*i*u+l*o,t[2]=l*i*u-s*o,t[3]=0,t[4]=i*s*u-l*o,t[5]=s*s*u+e,t[6]=l*s*u+i*o,t[7]=0,t[8]=i*l*u+s*o,t[9]=s*l*u-i*o,t[10]=l*l*u+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=n+n,s=o+o,l=e+e,M=n*i,h=n*s,c=n*l,f=o*s,x=o*l,m=e*l,S=u*i,I=u*s,D=u*l;return t[0]=1-(f+m),t[1]=h+D,t[2]=c-I,t[3]=0,t[4]=h-D,t[5]=1-(M+m),t[6]=x+S,t[7]=0,t[8]=c+I,t[9]=x-S,t[10]=1-(M+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},o.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},o.getRotation=function(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),
t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t},o.fromRotationTranslationScale=function(t,a,r,n){var o=a[0],e=a[1],u=a[2],i=a[3],s=o+o,l=e+e,M=u+u,h=o*s,c=o*l,f=o*M,x=e*l,m=e*M,S=u*M,I=i*s,D=i*l,d=i*M,F=n[0],p=n[1],v=n[2];return t[0]=(1-(x+S))*F,t[1]=(c+d)*F,t[2]=(f-D)*F,t[3]=0,t[4]=(c-d)*p,t[5]=(1-(h+S))*p,t[6]=(m+I)*p,t[7]=0,t[8]=(f+D)*v,t[9]=(m-I)*v,t[10]=(1-(h+x))*v,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,a,r,n,o){var e=a[0],u=a[1],i=a[2],s=a[3],l=e+e,M=u+u,h=i+i,c=e*l,f=e*M,x=e*h,m=u*M,S=u*h,I=i*h,D=s*l,d=s*M,F=s*h,p=n[0],v=n[1],b=n[2],g=o[0],_=o[1],E=o[2];return t[0]=(1-(m+I))*p,t[1]=(f+F)*p,t[2]=(x-d)*p,t[3]=0,t[4]=(f-F)*v,t[5]=(1-(c+I))*v,t[6]=(S+D)*v,t[7]=0,t[8]=(x+d)*b,t[9]=(S-D)*b,t[10]=(1-(c+m))*b,t[11]=0,t[12]=r[0]+g-(t[0]*g+t[4]*_+t[8]*E),t[13]=r[1]+_-(t[1]*g+t[5]*_+t[9]*E),t[14]=r[2]+E-(t[2]*g+t[6]*_+t[10]*E),t[15]=1,t},o.fromQuat=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=r+r,i=n+n,s=o+o,l=r*u,M=n*u,h=n*i,c=o*u,f=o*i,x=o*s,m=e*u,S=e*i,I=e*s;return t[0]=1-h-x,t[1]=M+I,t[2]=c-S,t[3]=0,t[4]=M-I,t[5]=1-l-x,t[6]=f+m,t[7]=0,t[8]=c+S,t[9]=f-m,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,a,r,n,o,e,u){var i=1/(r-a),s=1/(o-n),l=1/(e-u);return t[0]=2*e*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*s,t[6]=0,t[7]=0,t[8]=(r+a)*i,t[9]=(o+n)*s,t[10]=(u+e)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*e*2*l,t[15]=0,t},o.perspective=function(t,a,r,n,o){var e=1/Math.tan(a/2),u=1/(n-o);return t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*n*u,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,a,r,n){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),u=Math.tan(a.leftDegrees*Math.PI/180),i=Math.tan(a.rightDegrees*Math.PI/180),s=2/(u+i),l=2/(o+e);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((u-i)*s*.5),t[9]=(o-e)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},o.ortho=function(t,a,r,n,o,e,u){var i=1/(a-r),s=1/(n-o),l=1/(e-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(a+r)*i,t[13]=(o+n)*s,t[14]=(u+e)*l,t[15]=1,t},o.lookAt=function(t,a,r,e){var u,i,s,l,M,h,c,f,x,m,S=a[0],I=a[1],D=a[2],d=e[0],F=e[1],p=e[2],v=r[0],b=r[1],g=r[2];return Math.abs(S-v)<n.EPSILON&&Math.abs(I-b)<n.EPSILON&&Math.abs(D-g)<n.EPSILON?o.identity(t):(c=S-v,f=I-b,x=D-g,m=1/Math.sqrt(c*c+f*f+x*x),c*=m,f*=m,x*=m,u=F*x-p*f,i=p*c-d*x,s=d*f-F*c,m=Math.sqrt(u*u+i*i+s*s),m?(m=1/m,u*=m,i*=m,s*=m):(u=0,i=0,s=0),l=f*s-x*i,M=x*u-c*s,h=c*i-f*u,m=Math.sqrt(l*l+M*M+h*h),m?(m=1/m,l*=m,M*=m,h*=m):(l=0,M=0,h=0),t[0]=u,t[1]=l,t[2]=c,t[3]=0,t[4]=i,t[5]=M,t[6]=f,t[7]=0,t[8]=s,t[9]=h,t[10]=x,t[11]=0,t[12]=-(u*S+i*I+s*D),t[13]=-(l*S+M*I+h*D),t[14]=-(c*S+f*I+x*D),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=t[3],i=t[4],s=t[5],l=t[6],M=t[7],h=t[8],c=t[9],f=t[10],x=t[11],m=t[12],S=t[13],I=t[14],D=t[15],d=a[0],F=a[1],p=a[2],v=a[3],b=a[4],g=a[5],_=a[6],E=a[7],A=a[8],w=a[9],y=a[10],z=a[11],T=a[12],R=a[13],P=a[14],L=a[15];return Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-F)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(e-p)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(u-v)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(i-b)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-_)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(M-E)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(h-A)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(c-w)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-y)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(x-z)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(z))&&Math.abs(m-T)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(S-R)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(R))&&Math.abs(I-P)<=n.EPSILON*Math.max(1,Math.abs(I),Math.abs(P))&&Math.abs(D-L)<=n.EPSILON*Math.max(1,Math.abs(D),Math.abs(L))},a.exports=o},{"./common.js":2}],7:[function(t,a,r){var n=t("./common.js"),o=t("./mat3.js"),e=t("./vec3.js"),u=t("./vec4.js"),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.rotationTo=function(){var t=e.create(),a=e.fromValues(1,0,0),r=e.fromValues(0,1,0);return function(n,o,u){var s=e.dot(o,u);return s<-.999999?(e.cross(t,a,o),e.length(t)<1e-6&&e.cross(t,r,o),e.normalize(t,t),i.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(e.cross(t,o,u),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,i.normalize(n,n))}}(),i.setAxes=function(){var t=o.create();return function(a,r,n,o){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],i.normalize(a,i.fromMat3(a,t))}}(),i.clone=u.clone,i.fromValues=u.fromValues,i.copy=u.copy,i.set=u.set,i.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.setAxisAngle=function(t,a,r){r=.5*r;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},i.getAxisAngle=function(t,a){var r=2*Math.acos(a[3]),n=Math.sin(r/2);return 0!=n?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},i.add=u.add,i.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3],i=r[0],s=r[1],l=r[2],M=r[3];return t[0]=n*M+u*i+o*l-e*s,t[1]=o*M+u*s+e*i-n*l,t[2]=e*M+u*l+n*s-o*i,t[3]=u*M-n*i-o*s-e*l,t},i.mul=i.multiply,i.scale=u.scale,i.rotateX=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],u=a[3],i=Math.sin(r),s=Math.cos(r);return t[0]=n*s+u*i,t[1]=o*s+e*i,t[2]=e*s-o*i,t[3]=u*s-n*i,t},i.rotateY=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],u=a[3],i=Math.sin(r),s=Math.cos(r);return t[0]=n*s-e*i,t[1]=o*s+u*i,t[2]=e*s+n*i,t[3]=u*s-o*i,t},i.rotateZ=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],u=a[3],i=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*i,t[1]=o*s-n*i,t[2]=e*s+u*i,t[3]=u*s-e*i,t},i.calculateW=function(t,a){var r=a[0],n=a[1],o=a[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t},i.dot=u.dot,i.lerp=u.lerp,i.slerp=function(t,a,r,n){var o,e,u,i,s,l=a[0],M=a[1],h=a[2],c=a[3],f=r[0],x=r[1],m=r[2],S=r[3];return e=l*f+M*x+h*m+c*S,e<0&&(e=-e,f=-f,x=-x,m=-m,S=-S),1-e>1e-6?(o=Math.acos(e),u=Math.sin(o),i=Math.sin((1-n)*o)/u,s=Math.sin(n*o)/u):(i=1-n,s=n),t[0]=i*l+s*f,t[1]=i*M+s*x,t[2]=i*h+s*m,t[3]=i*c+s*S,t},i.sqlerp=function(){var t=i.create(),a=i.create();return function(r,n,o,e,u,s){return i.slerp(t,n,u,s),i.slerp(a,o,e,s),i.slerp(r,t,a,2*s*(1-s)),r}}(),i.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=r*r+n*n+o*o+e*e,i=u?1/u:0;return t[0]=-r*i,t[1]=-n*i,t[2]=-o*i,t[3]=e*i,t},i.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},i.length=u.length,i.len=i.length,i.squaredLength=u.squaredLength,i.sqrLen=i.squaredLength,i.normalize=u.normalize,i.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var o=0;a[4]>a[0]&&(o=1),a[8]>a[3*o+o]&&(o=2);var e=(o+1)%3,u=(o+2)%3;r=Math.sqrt(a[3*o+o]-a[3*e+e]-a[3*u+u]+1),t[o]=.5*r,r=.5/r,t[3]=(a[3*e+u]-a[3*u+e])*r,t[e]=(a[3*e+o]+a[3*o+e])*r,t[u]=(a[3*u+o]+a[3*o+u])*r}return t},i.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.exactEquals=u.exactEquals,i.equals=u.equals,a.exports=i},{"./common.js":2,"./mat3.js":5,"./vec3.js":9,"./vec4.js":10}],8:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},o.fromValues=function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},o.set=function(t,a,r){return t[0]=a,t[1]=r,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},o.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},o.lerp=function(t,a,r,n){var o=a[0],e=a[1];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t},o.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},o.transformMat2=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t},o.transformMat2d=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t},o.transformMat3=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,u){var i,s;for(r||(r=2),n||(n=0),s=o?Math.min(o*r+n,a.length):a.length,i=n;i<s;i+=r)t[0]=a[i],t[1]=a[i+1],e(t,t,u),a[i]=t[0],a[i+1]=t[1];return a}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},o.equals=function(t,a){var r=t[0],o=t[1],e=a[0],u=a[1];return Math.abs(r-e)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},a.exports=o},{"./common.js":2}],9:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},o.fromValues=function(t,a,r){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=a,o[2]=r,o},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},o.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2];return r*r+n*n+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=a[2],e=r*r+n*n+o*o;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},o.cross=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=r[0],i=r[1],s=r[2];return t[0]=o*s-e*i,t[1]=e*u-n*s,t[2]=n*i-o*u,t},o.lerp=function(t,a,r,n){var o=a[0],e=a[1],u=a[2];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t[2]=u+n*(r[2]-u),t},o.hermite=function(t,a,r,n,o,e){var u=e*e,i=u*(2*e-3)+1,s=u*(e-2)+e,l=u*(e-1),M=u*(3-2*e);return t[0]=a[0]*i+r[0]*s+n[0]*l+o[0]*M,t[1]=a[1]*i+r[1]*s+n[1]*l+o[1]*M,t[2]=a[2]*i+r[2]*s+n[2]*l+o[2]*M,t},o.bezier=function(t,a,r,n,o,e){var u=1-e,i=u*u,s=e*e,l=i*u,M=3*e*i,h=3*s*u,c=s*e;return t[0]=a[0]*l+r[0]*M+n[0]*h+o[0]*c,t[1]=a[1]*l+r[1]*M+n[1]*h+o[1]*c,t[2]=a[2]*l+r[2]*M+n[2]*h+o[2]*c,t},o.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,e=Math.sqrt(1-o*o)*a;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=o*a,t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=r[3]*n+r[7]*o+r[11]*e+r[15];return u=u||1,t[0]=(r[0]*n+r[4]*o+r[8]*e+r[12])/u,t[1]=(r[1]*n+r[5]*o+r[9]*e+r[13])/u,t[2]=(r[2]*n+r[6]*o+r[10]*e+r[14])/u,t},o.transformMat3=function(t,a,r){var n=a[0],o=a[1],e=a[2];return t[0]=n*r[0]+o*r[3]+e*r[6],t[1]=n*r[1]+o*r[4]+e*r[7],t[2]=n*r[2]+o*r[5]+e*r[8],t},o.transformQuat=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=r[0],i=r[1],s=r[2],l=r[3],M=l*n+i*e-s*o,h=l*o+s*n-u*e,c=l*e+u*o-i*n,f=-u*n-i*o-s*e;return t[0]=M*l+f*-u+h*-s-c*-i,t[1]=h*l+f*-i+c*-u-M*-s,t[2]=c*l+f*-s+M*-i-h*-u,t},o.rotateX=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[0],e[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),e[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.rotateY=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),e[1]=o[1],e[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.rotateZ=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),e[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),e[2]=o[2],t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,u){var i,s;for(r||(r=3),n||(n=0),s=o?Math.min(o*r+n,a.length):a.length,i=n;i<s;i+=r)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],e(t,t,u),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2];return a}}(),o.angle=function(t,a){var r=o.fromValues(t[0],t[1],t[2]),n=o.fromValues(a[0],a[1],a[2]);o.normalize(r,r),o.normalize(n,n);var e=o.dot(r,n);return e>1?0:Math.acos(e)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=a[0],i=a[1],s=a[2];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-i)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))},a.exports=o},{"./common.js":2}],10:[function(t,a,r){var n=t("./common.js"),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.fromValues=function(t,a,r,o){var e=new n.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=o,e},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.set=function(t,a,r,n,o){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return Math.sqrt(r*r+n*n+o*o+e*e)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return r*r+n*n+o*o+e*e},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1],n=t[2],o=t[3];return Math.sqrt(a*a+r*r+n*n+o*o)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],o=t[3];return a*a+r*r+n*n+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],u=r*r+n*n+o*o+e*e;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=n*u,t[2]=o*u,t[3]=e*u),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},o.lerp=function(t,a,r,n){var o=a[0],e=a[1],u=a[2],i=a[3];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t[2]=u+n*(r[2]-u),t[3]=i+n*(r[3]-i),t},o.random=function(t,a){return a=a||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),o.normalize(t,t),o.scale(t,t,a),t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=a[3];return t[0]=r[0]*n+r[4]*o+r[8]*e+r[12]*u,t[1]=r[1]*n+r[5]*o+r[9]*e+r[13]*u,t[2]=r[2]*n+r[6]*o+r[10]*e+r[14]*u,t[3]=r[3]*n+r[7]*o+r[11]*e+r[15]*u,t},o.transformQuat=function(t,a,r){var n=a[0],o=a[1],e=a[2],u=r[0],i=r[1],s=r[2],l=r[3],M=l*n+i*e-s*o,h=l*o+s*n-u*e,c=l*e+u*o-i*n,f=-u*n-i*o-s*e;return t[0]=M*l+f*-u+h*-s-c*-i,t[1]=h*l+f*-i+c*-u-M*-s,t[2]=c*l+f*-s+M*-i-h*-u,t[3]=a[3],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,u){var i,s;for(r||(r=4),n||(n=0),s=o?Math.min(o*r+n,a.length):a.length,i=n;i<s;i+=r)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],t[3]=a[i+3],e(t,t,u),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2],a[i+3]=t[3];return a}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],u=t[3],i=a[0],s=a[1],l=a[2],M=a[3];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},a.exports=o},{"./common.js":2}],11:[function(t,a,r){"use strict";var n=t("./context").ctx,o=function(){this._glBuffer=null,this._glBuffer=n().gl.createBuffer(),this._count=0,this._vertices=[]};o.prototype.add=function(t){for(var a=0;a<t.length;a++)this._vertices.push.apply(this._vertices,t[a])},o.prototype.addIdx=function(t,a){for(var r=0;r<a.length;r++)this._vertices.push.apply(this._vertices,t[a[r]])},o.prototype.addN=function(t,a){for(var r=0;r<a;r++)this._vertices.push.apply(this._vertices,t)},o.prototype.commit=function(t){var a=n().gl,r=a.STATIC_DRAW;t&&(r=a.DYNAMIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(this._vertices),r),this._count=this._vertices.length},o.prototype.bind=function(t){var a=n().gl,r=n().shaderInUse.attributes[t];return a.enableVertexAttribArray(r.handler),a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.vertexAttribPointer(r.handler,r.size,a.FLOAT,!1,0,0),this._count/r.size},o.prototype["delete"]=function(){n().gl.deleteBuffer(this._glBuffer)};var e=function(t){this._vao=n().gl.createVertexArray(),this._buffers={},this._count=0;for(var a=0;a<t.length;a++)this._buffers[t[a]]=new o};e.prototype.buff=function(t){return this._buffers[t]},e.prototype.commit=function(t){var a=n().gl;for(var r in this._buffers)this._buffers[r].commit(t);a.bindVertexArray(this._vao);for(var r in this._buffers)this._count=this._buffers[r].bind(r);a.bindVertexArray(null)},e.prototype.draw=function(){var t=n().gl;t.bindVertexArray(this._vao),t.drawArrays(t.TRIANGLES,0,this._count),t.bindVertexArray(null)},e.prototype["delete"]=function(){for(var t in this._buffers)this._buffers[t]["delete"]();this._buffers={},n().gl.deleteVertexArray(this._vao),this._vao=null,this._count=0},a.exports={Buffer:o,BufferArray:e}},{"./context":13}],12:[function(t,a,r){"use strict";var n=t("gl-matrix").mat4,o=t("./context").ctx,e=t("./graph"),u=function(t){this._stagingViewMat=n.create(),this._uniformName=t,this.node=new e.GraphNode(new e.Transform)};u.prototype.expose=function(){n.invert(this._stagingViewMat,this.node.getBubbledMat()),o().shaderInUse.uniforms[this._uniformName](!1,this._stagingViewMat)},a.exports=u},{"./context":13,"./graph":14,"gl-matrix":1}],13:[function(t,a,r){"use strict";var n=null,o=function(t){var a;this.canvas=document.getElementById(t);try{a=this.canvas.getContext("webgl2")}catch(r){alert("Could not initialise WebGL, sorry :-(")}a||alert("Could not initialise WebGL, sorry :-("),this.gl=a,this.shaderInUse=null,this.resizeCallbacks=[],this.globs={},this._setFlags(),this._prepareGlobs(),n=this};o.prototype._setFlags=function(){var t=this.gl;t.clearColor(0,0,0,1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},o.prototype._prepareGlobs=function(){var t=this.gl,a=this.globs;a.unifMap={},a.unifMap[t.INT]=t.uniform1i,a.unifMap[t.FLOAT]=t.uniform1f,a.unifMap[t.FLOAT_VEC2]=t.uniform2fv,a.unifMap[t.FLOAT_VEC3]=t.uniform3fv,a.unifMap[t.FLOAT_VEC4]=t.uniform4fv,a.unifMap[t.INT_VEC2]=t.uniform2iv,a.unifMap[t.INT_VEC3]=t.uniform3iv,a.unifMap[t.INT_VEC4]=t.uniform4iv,a.unifMap[t.FLOAT_MAT2]=t.uniformMatrix2fv,a.unifMap[t.FLOAT_MAT3]=t.uniformMatrix3fv,a.unifMap[t.FLOAT_MAT4]=t.uniformMatrix4fv,a.unifMap[t.SAMPLER_2D]=t.uniform1i,a.attrMap={},a.attrMap[t.FLOAT]=1,a.attrMap[t.FLOAT_VEC2]=2,a.attrMap[t.FLOAT_VEC3]=3,a.attrMap[t.FLOAT_VEC4]=4},o.prototype._setFlags=function(){var t=this.gl;t.clearColor(0,0,0,1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},o.prototype.resizeIfNeeded=function(){var t=this.canvas.clientWidth,a=this.canvas.clientHeight,r=this.gl;this.canvas.width===t&&this.canvas.height===a||(this.canvas.width=t,this.canvas.height=a,this.resizeCallbacks.forEach(function(t){t()}),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight))},o.prototype.clear=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)};var e=function(){return n};a.exports={Context:o,ctx:e}},{}],14:[function(t,a,r){"use strict";var n=t("gl-matrix").mat4,o=t("gl-matrix").quat,e=function(){this.tX=0,this.tY=0,this.tZ=0,this.rX=0,this.rY=0,this.rZ=0,this.sX=1,this.sY=1,this.sZ=1,this.transformMat=n.create(),this.rotationQuat=o.create()};e.prototype.refresh=function(){var t=this.rotationQuat;o.identity(t),o.rotateX(t,t,this.rX),o.rotateY(t,t,this.rY),o.rotateZ(t,t,this.rZ),n.fromRotationTranslationScale(this.transformMat,t,[this.tX,this.tY,this.tZ],[this.sX,this.sY,this.sZ])};var u=function(t){this.transform=t,this.parent=null,this.stagingMat=n.create()};u.prototype.getBubbledMat=function(){return n.identity(this.stagingMat),this.parent?n.multiply(this.stagingMat,this.parent.getBubbledMat(),this.transform.transformMat):n.multiply(this.stagingMat,this.stagingMat,this.transform.transformMat),this.stagingMat},a.exports={GraphNode:u,Transform:e}},{"gl-matrix":1}],15:[function(t,a,r){"use strict";var n=t("./buffer"),o=t("./camera"),e=t("./projection"),u=t("./shaders"),i=t("./context"),s=t("./texture"),l=t("./graph"),M=t("./motion"),h=t("./input");a.exports={buffers:n,Camera:o,Projection:e,Shader:u,context:i,Texture:s,graph:l,motion:M,input:h}},{"./buffer":11,"./camera":12,"./context":13,"./graph":14,"./input":16,"./motion":17,"./projection":18,"./shaders":19,"./texture":20}],16:[function(t,a,r){"use strict";var n=function(){this.keystates={},this.boundKeyup=this.keyup.bind(this),this.boundKeydown=this.keydown.bind(this)};n.prototype.keyup=function(t){this.keystates[t.key]=!0},n.prototype.keydown=function(t){this.keystates[t.key]&&(this.keystates[t.key]=!1)},n.prototype.keyChecker=function(t){return function(){return this.isPressed(t)}.bind(this)},n.prototype.isPressed=function(t){return!!this.keystates[t]},n.prototype.listen=function(){document.addEventListener("keydown",this.boundKeyup,!1),document.addEventListener("keyup",this.boundKeydown,!1)},n.prototype.stopListening=function(){document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler)},a.exports={KeyboardState:n}},{}],17:[function(t,a,r){"use strict";var n=function(t,a){var r=0,n=0,o=function(o,e,u,i,s,l){u-r>a&&(t(o,n,u,i,r,l),n++,r=u)};return o},o=function(t){return function(a){t.forEach(function(t){t.tick(a)})}},e=function(t,a,r){this.running=!1,this._wasRunning=!1,this.startTs=0,this.previousTs=0,this.idx=0,this.previousPayload=null,this.name=t,this.callback=a,r&&(this.stateChecker=r)};e.prototype.stateChecker=function(){return this.running},e.prototype.nowGetter=function(){return performance.now()},e.prototype.tick=function(t){var a=this.stateChecker();a?(t||(t=this.nowGetter()),this._wasRunning||(this._wasRunning=!0,this.startTs=t,this.previousTs=t,this.idx=0),this.previousPayload=this.callback(this.name,this.idx,t,this.startTs,this.previousTs,this.previousPayload),this.idx++,this.previousTs=t):this._wasRunning&&(this._wasRunning=!1)},a.exports={slowdownWrapper:n,Motion:e,ticker:o}},{}],18:[function(t,a,r){"use strict";var n=t("gl-matrix").mat4,o=t("./context").ctx,e=function(t,a){this._projMat=n.create(),this._uniformName=t,this._halfScreen=a||3};e.prototype.ortho=function(){var t=o(),a=t.canvas.height/t.canvas.width,r=this._halfScreen,e=this._halfScreen*a;n.ortho(this._projMat,-r,r,-e,e,-1,1)},e.prototype.expose=function(){o().shaderInUse.uniforms[this._uniformName](!1,this._projMat)},a.exports=e},{"./context":13,"gl-matrix":1}],19:[function(t,a,r){"use strict";var n=t("./context").ctx,o=/(\w+)\[?(\d+)?\]?\.?(\w+)?/,e=function(){this.attributes={},this.uniforms={},this._program=null};e.prototype._getShader=function(t,a){var r=n().gl,o=r.createShader(a);return r.shaderSource(o,t),r.compileShader(o),r.getShaderParameter(o,r.COMPILE_STATUS)?o:(alert(r.getShaderInfoLog(o)),null)},e.prototype._createUnifCallable=function(t){var a=n();return a.globs.unifMap[t.type].bind(a.gl,a.gl.getUniformLocation(this._program,t.name))},e.prototype._insertCallable=function(t,a){var r=o.exec(t.name),n=r[1],e=r[2],u=r[3];e?(this.uniforms[n]||(this.uniforms[n]=[]),u?(this.uniforms[n][e]||(this.uniforms[n][e]={}),this.uniforms[n][e][u]=a):this.uniforms[n][e]=a):u?(this.uniforms[n]||(this.uniforms[n]={}),this.uniforms[n][u]=a):this.uniforms[n]=a},e.prototype._parseUniforms=function(){for(var t,a,r=n().gl,o=this._program,e=r.getProgramParameter(o,r.ACTIVE_UNIFORMS),u=0;u<e;u++)a=r.getActiveUniform(o,u),t=this._createUnifCallable(a),this._insertCallable(a,t)},e.prototype._parseAttributes=function(){for(var t,a=n(),r=a.gl,o=this._program,e=r.getProgramParameter(o,r.ACTIVE_ATTRIBUTES),u=0;u<e;u++){t=r.getActiveAttrib(o,u);var i=r.getAttribLocation(o,t.name);this.attributes[t.name]={size:a.globs.attrMap[t.type],handler:i}}},e.prototype.init=function(t,a){var r=n().gl,o=this._getShader(t,r.VERTEX_SHADER),e=this._getShader(a,r.FRAGMENT_SHADER),u=r.createProgram();this._program=u,r.attachShader(u,o),r.attachShader(u,e),r.linkProgram(u),r.getProgramParameter(u,r.LINK_STATUS)||alert("Could not initialise shaders"),this._parseUniforms(),this._parseAttributes(),r.useProgram(u)},e.prototype.use=function(){var t=n();t.gl.useProgram(this._program),t.shaderInUse=this},a.exports=e},{"./context":13}],20:[function(t,a,r){"use strict";var n=t("./context").ctx,o=function(){this._glTexture=n().gl.createTexture(),this._image=new Image,this._image.onload=this._onload.bind(this),this._poolGet()};o.usedTexturesIdx=[],o.prototype._poolGet=function(){for(var t=null,a=0;a<o.usedTexturesIdx.length;a++)if(!o.usedTexturesIdx[a]){o.usedTexturesIdx[a]=!0,t=a;break}null===t&&(t=o.usedTexturesIdx.push(!0)-1),this.texIdx=a,this._texIdentifier=n().gl["TEXTURE"+a]},o.prototype._poolRelease=function(){o.usedTexturesIdx[this.texIdx]=!1,this.texIdx=null,this._texIdentifier=null},o.prototype.free=function(){this._image.src="",this._poolRelease()},o.prototype.load=function(t,a){this._image.src=t,this._loadCb=a},o.prototype._onload=function(){var t=n().gl;t.bindTexture(t.TEXTURE_2D,this._glTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),this._loadCb&&this._loadCb();
},o.prototype.enable=function(){var t=n().gl;t.activeTexture(this._texIdentifier),t.bindTexture(t.TEXTURE_2D,this._glTexture)},a.exports=o},{"./context":13}],21:[function(t,a,r){"use strict";var n=t("./index.js");window.wiggle=n},{"./index.js":15}]},{},[21]);