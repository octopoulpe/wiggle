!function e(a,o,i){function u(n,t){if(!o[n]){if(!a[n]){var r="function"==typeof require&&require;if(!t&&r)return r(n,!0);if(s)return s(n,!0);throw(r=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",r}r=o[n]={exports:{}},a[n][0].call(r.exports,function(t){return u(a[n][1][t]||t)},r,r.exports,e,a,o,i)}return o[n].exports}for(var s="function"==typeof require&&require,t=0;t<i.length;t++)u(i[t]);return u}({1:[function(t,n,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=a=t},r.toRadian=function(t){return t*i},r.equals=function(t,n){return Math.abs(t-n)<=e*Math.max(1,Math.abs(t),Math.abs(n))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var e=1e-6;r.EPSILON=e;var a="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=a;var o=Math.random;r.RANDOM=o;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)})},{}],2:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var e=a(t("./common.js"));r.glMatrix=e;e=a(t("./mat2.js"));r.mat2=e;e=a(t("./mat2d.js"));r.mat2d=e;e=a(t("./mat3.js"));r.mat3=e;e=a(t("./mat4.js"));r.mat4=e;e=a(t("./quat.js"));r.quat=e;e=a(t("./quat2.js"));r.quat2=e;e=a(t("./vec2.js"));r.vec2=e;e=a(t("./vec3.js"));r.vec3=e;t=a(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((e=o?Object.getOwnPropertyDescriptor(t,r):null)&&(e.get||e.set)?Object.defineProperty(a,r,e):a[r]=t[r]);return a.default=t,n&&n.set(t,a),a}r.vec4=t},{"./common.js":1,"./mat2.js":3,"./mat2d.js":4,"./mat3.js":5,"./mat4.js":6,"./quat.js":7,"./quat2.js":8,"./vec2.js":9,"./vec3.js":10,"./vec4.js":11}],3:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new s.ARRAY_TYPE(4);s.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var n=new s.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,n,r,e){var a=new s.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a},r.set=function(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t},r.transpose=function(t,n){{var r;t===n?(r=n[1],t[1]=n[2],t[2]=r):(t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3])}return t},r.invert=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],n=r*o-a*e;return n?(n=1/n,t[0]=o*n,t[1]=-e*n,t[2]=-a*n,t[3]=r*n,t):null},r.adjoint=function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=e,r.rotate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],n=Math.sin(r),r=Math.cos(r);return t[0]=e*r+o*n,t[1]=a*r+i*n,t[2]=e*-n+o*r,t[3]=a*-n+i*r,t},r.scale=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],n=r[0],r=r[1];return t[0]=e*n,t[1]=a*n,t[2]=o*r,t[3]=i*r,t},r.fromRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},r.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},r.LDU=function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},r.subtract=a,r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=n[0],u=n[1],t=n[2],n=n[3];return Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=s.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-t)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(o-n)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(n))},r.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},r.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},r.sub=r.mul=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=r[0],s=r[1],n=r[2],r=r[3];return t[0]=e*u+o*s,t[1]=a*u+i*s,t[2]=e*n+o*r,t[3]=a*n+i*r,t}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}r.mul=e,r.sub=a},{"./common.js":1}],4:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new l.ARRAY_TYPE(6);l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var n=new l.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,n,r,e,a,o){var i=new l.ARRAY_TYPE(6);return i[0]=t,i[1]=n,i[2]=r,i[3]=e,i[4]=a,i[5]=o,i},r.set=function(t,n,r,e,a,o,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t},r.invert=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],n=r*o-e*a;return n?(n=1/n,t[0]=o*n,t[1]=-e*n,t[2]=-a*n,t[3]=r*n,t[4]=(a*u-o*i)*n,t[5]=(e*i-r*u)*n,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=e,r.rotate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],n=Math.sin(r),r=Math.cos(r);return t[0]=e*r+o*n,t[1]=a*r+i*n,t[2]=e*-n+o*r,t[3]=a*-n+i*r,t[4]=u,t[5]=s,t},r.scale=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],n=r[0],r=r[1];return t[0]=e*n,t[1]=a*n,t[2]=o*r,t[3]=i*r,t[4]=u,t[5]=s,t},r.translate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],n=r[0],r=r[1];return t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=e*n+o*r+u,t[5]=a*n+i*r+s,t},r.fromRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t},r.subtract=a,r.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t},r.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=n[0],c=n[1],f=n[2],h=n[3],t=n[4],n=n[5];return Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-c)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-t)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(t))&&Math.abs(u-n)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(n))},r.sub=r.mul=void 0;var l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=r[0],f=r[1],h=r[2],l=r[3],n=r[4],r=r[5];return t[0]=e*c+o*f,t[1]=a*c+i*f,t[2]=e*h+o*l,t[3]=a*h+i*l,t[4]=e*n+o*r+u,t[5]=a*n+i*r+s,t}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}r.mul=e,r.sub=a},{"./common.js":1}],5:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new y.ARRAY_TYPE(9);y.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},r.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},r.clone=function(t){var n=new y.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},r.fromValues=function(t,n,r,e,a,o,i,u,s){var c=new y.ARRAY_TYPE(9);return c[0]=t,c[1]=n,c[2]=r,c[3]=e,c[4]=a,c[5]=o,c[6]=i,c[7]=u,c[8]=s,c},r.set=function(t,n,r,e,a,o,i,u,s,c){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,n){{var r,e,a;t===n?(r=n[1],e=n[2],a=n[5],t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=a):(t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8])}return t},r.invert=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=f*i-u*c,l=-f*o+u*s,p=c*o-i*s,n=r*h+e*l+a*p;return n?(n=1/n,t[0]=h*n,t[1]=(-f*e+a*c)*n,t[2]=(u*e-a*i)*n,t[3]=l*n,t[4]=(f*r-a*s)*n,t[5]=(-u*r+a*o)*n,t[6]=p*n,t[7]=(-c*r+e*s)*n,t[8]=(i*r-e*o)*n,t):null},r.adjoint=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],n=n[8];return t[0]=i*n-u*c,t[1]=a*c-e*n,t[2]=e*u-a*i,t[3]=u*s-o*n,t[4]=r*n-a*s,t[5]=a*o-r*u,t[6]=o*c-i*s,t[7]=e*s-r*c,t[8]=r*i-e*o,t},r.determinant=function(t){var n=t[0],r=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],t=t[8];return n*(t*o-i*s)+r*(-t*a+i*u)+e*(s*a-o*u)},r.multiply=e,r.translate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],n=r[0],r=r[1];return t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=n*e+r*i+c,t[7]=n*a+r*u+f,t[8]=n*o+r*s+h,t},r.rotate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],n=Math.sin(r),r=Math.cos(r);return t[0]=r*e+n*i,t[1]=r*a+n*u,t[2]=r*o+n*s,t[3]=r*i-n*e,t[4]=r*u-n*a,t[5]=r*s-n*o,t[6]=c,t[7]=f,t[8]=h,t},r.scale=function(t,n,r){var e=r[0],r=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=r*n[3],t[4]=r*n[4],t[5]=r*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},r.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},r.fromRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},r.fromQuat=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r+r,u=e+e,s=a+a,c=r*i,f=e*i,n=e*u,r=a*i,e=a*u,a=a*s,i=o*i,u=o*u,s=o*s;return t[0]=1-n-a,t[3]=f-s,t[6]=r+u,t[1]=f+s,t[4]=1-c-a,t[7]=e-i,t[2]=r-u,t[5]=e+i,t[8]=1-c-n,t},r.normalFromMat4=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],p=n[11],M=n[12],m=n[13],d=n[14],b=n[15],y=r*u-e*i,v=r*s-a*i,_=r*c-o*i,g=e*s-a*u,P=e*c-o*u,E=a*c-o*s,x=f*m-h*M,A=f*d-l*M,n=f*b-p*M,f=h*d-l*m,h=h*b-p*m,l=l*b-p*d,p=y*l-v*h+_*f+g*n-P*A+E*x;return p?(p=1/p,t[0]=(u*l-s*h+c*f)*p,t[1]=(s*n-i*l-c*A)*p,t[2]=(i*h-u*n+c*x)*p,t[3]=(a*h-e*l-o*f)*p,t[4]=(r*l-a*n+o*A)*p,t[5]=(e*n-r*h-o*x)*p,t[6]=(m*E-d*P+b*g)*p,t[7]=(d*_-M*E-b*v)*p,t[8]=(M*P-m*_+b*y)*p,t):null},r.projection=function(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t},r.subtract=a,r.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t},r.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=n[0],l=n[1],p=n[2],M=n[3],m=n[4],d=n[5],b=n[6],t=n[7],n=n[8];return Math.abs(r-h)<=y.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(e-l)<=y.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(a-p)<=y.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-M)<=y.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-m)<=y.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-d)<=y.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-b)<=y.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-t)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(f-n)<=y.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))},r.sub=r.mul=void 0;var y=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=r[0],p=r[1],M=r[2],m=r[3],d=r[4],b=r[5],y=r[6],n=r[7],r=r[8];return t[0]=l*e+p*i+M*c,t[1]=l*a+p*u+M*f,t[2]=l*o+p*s+M*h,t[3]=m*e+d*i+b*c,t[4]=m*a+d*u+b*f,t[5]=m*o+d*s+b*h,t[6]=y*e+n*i+r*c,t[7]=y*a+n*u+r*f,t[8]=y*o+n*s+r*h,t}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}r.mul=e,r.sub=a},{"./common.js":1}],6:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new L.ARRAY_TYPE(16);L.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},r.clone=function(t){var n=new L.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},r.fromValues=function(t,n,r,e,a,o,i,u,s,c,f,h,l,p,M,m){var d=new L.ARRAY_TYPE(16);return d[0]=t,d[1]=n,d[2]=r,d[3]=e,d[4]=a,d[5]=o,d[6]=i,d[7]=u,d[8]=s,d[9]=c,d[10]=f,d[11]=h,d[12]=l,d[13]=p,d[14]=M,d[15]=m,d},r.set=function(t,n,r,e,a,o,i,u,s,c,f,h,l,p,M,m,d){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=p,t[13]=M,t[14]=m,t[15]=d,t},r.identity=M,r.transpose=function(t,n){{var r,e,a,o,i,u;t===n?(r=n[1],e=n[2],a=n[3],o=n[6],i=n[7],u=n[11],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u):(t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15])}return t},r.invert=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],p=n[11],M=n[12],m=n[13],d=n[14],b=n[15],y=r*u-e*i,v=r*s-a*i,_=r*c-o*i,g=e*s-a*u,P=e*c-o*u,E=a*c-o*s,x=f*m-h*M,A=f*d-l*M,O=f*b-p*M,S=h*d-l*m,R=h*b-p*m,T=l*b-p*d,n=y*T-v*R+_*S+g*O-P*A+E*x;return n?(n=1/n,t[0]=(u*T-s*R+c*S)*n,t[1]=(a*R-e*T-o*S)*n,t[2]=(m*E-d*P+b*g)*n,t[3]=(l*P-h*E-p*g)*n,t[4]=(s*O-i*T-c*A)*n,t[5]=(r*T-a*O+o*A)*n,t[6]=(d*_-M*E-b*v)*n,t[7]=(f*E-l*_+p*v)*n,t[8]=(i*R-u*O+c*x)*n,t[9]=(e*O-r*R-o*x)*n,t[10]=(M*P-m*_+b*y)*n,t[11]=(h*_-f*P-p*y)*n,t[12]=(u*A-i*S-s*x)*n,t[13]=(r*S-e*A+a*x)*n,t[14]=(m*v-M*g-d*y)*n,t[15]=(f*g-h*v+l*y)*n,t):null},r.adjoint=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],p=n[11],M=n[12],m=n[13],d=n[14],n=n[15];return t[0]=u*(l*n-p*d)-h*(s*n-c*d)+m*(s*p-c*l),t[1]=-(e*(l*n-p*d)-h*(a*n-o*d)+m*(a*p-o*l)),t[2]=e*(s*n-c*d)-u*(a*n-o*d)+m*(a*c-o*s),t[3]=-(e*(s*p-c*l)-u*(a*p-o*l)+h*(a*c-o*s)),t[4]=-(i*(l*n-p*d)-f*(s*n-c*d)+M*(s*p-c*l)),t[5]=r*(l*n-p*d)-f*(a*n-o*d)+M*(a*p-o*l),t[6]=-(r*(s*n-c*d)-i*(a*n-o*d)+M*(a*c-o*s)),t[7]=r*(s*p-c*l)-i*(a*p-o*l)+f*(a*c-o*s),t[8]=i*(h*n-p*m)-f*(u*n-c*m)+M*(u*p-c*h),t[9]=-(r*(h*n-p*m)-f*(e*n-o*m)+M*(e*p-o*h)),t[10]=r*(u*n-c*m)-i*(e*n-o*m)+M*(e*c-o*u),t[11]=-(r*(u*p-c*h)-i*(e*p-o*h)+f*(e*c-o*u)),t[12]=-(i*(h*d-l*m)-f*(u*d-s*m)+M*(u*l-s*h)),t[13]=r*(h*d-l*m)-f*(e*d-a*m)+M*(e*l-a*h),t[14]=-(r*(u*d-s*m)-i*(e*d-a*m)+M*(e*s-a*u)),t[15]=r*(u*l-s*h)-i*(e*l-a*h)+f*(e*s-a*u),t},r.determinant=function(t){var n=t[0],r=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],p=t[12],M=t[13],m=t[14],t=t[15];return(n*i-r*o)*(h*t-l*m)-(n*u-e*o)*(f*t-l*M)+(n*s-a*o)*(f*m-h*M)+(r*u-e*i)*(c*t-l*p)-(r*s-a*i)*(c*m-h*p)+(e*s-a*u)*(c*M-f*p)},r.multiply=e,r.translate=function(t,n,r){var e,a,o,i,u,s,c,f,h,l,p,M=r[0],m=r[1],d=r[2];n===t?(t[12]=n[0]*M+n[4]*m+n[8]*d+n[12],t[13]=n[1]*M+n[5]*m+n[9]*d+n[13],t[14]=n[2]*M+n[6]*m+n[10]*d+n[14],t[15]=n[3]*M+n[7]*m+n[11]*d+n[15]):(e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],p=n[10],r=n[11],t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=p,t[11]=r,t[12]=e*M+u*m+h*d+n[12],t[13]=a*M+s*m+l*d+n[13],t[14]=o*M+c*m+p*d+n[14],t[15]=i*M+f*m+r*d+n[15]);return t},r.scale=function(t,n,r){var e=r[0],a=r[1],r=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},r.rotate=function(t,n,r,e){var a,o,i,u,s,c,f,h,l,p,M,m,d,b,y,v,_,g,P,E=e[0],x=e[1],A=e[2],O=Math.hypot(E,x,A);if(O<L.EPSILON)return null;E*=O=1/O,x*=O,A*=O,g=Math.sin(r),P=Math.cos(r),a=1-P,o=n[0],i=n[1],u=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7],p=n[8],M=n[9],m=n[10],d=n[11],b=E*E*a+P,y=x*E*a+A*g,v=A*E*a-x*g,_=E*x*a-A*g,e=x*x*a+P,O=A*x*a+E*g,r=E*A*a+x*g,g=x*A*a-E*g,P=A*A*a+P,t[0]=o*b+c*y+p*v,t[1]=i*b+f*y+M*v,t[2]=u*b+h*y+m*v,t[3]=s*b+l*y+d*v,t[4]=o*_+c*e+p*O,t[5]=i*_+f*e+M*O,t[6]=u*_+h*e+m*O,t[7]=s*_+l*e+d*O,t[8]=o*r+c*g+p*P,t[9]=i*r+f*g+M*P,t[10]=u*r+h*g+m*P,t[11]=s*r+l*g+d*P,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t},r.rotateX=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[4],i=n[5],u=n[6],s=n[7],c=n[8],f=n[9],h=n[10],r=n[11];n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[4]=o*a+c*e,t[5]=i*a+f*e,t[6]=u*a+h*e,t[7]=s*a+r*e,t[8]=c*a-o*e,t[9]=f*a-i*e,t[10]=h*a-u*e,t[11]=r*a-s*e,t},r.rotateY=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],s=n[3],c=n[8],f=n[9],h=n[10],r=n[11];n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=o*a-c*e,t[1]=i*a-f*e,t[2]=u*a-h*e,t[3]=s*a-r*e,t[8]=o*e+c*a,t[9]=i*e+f*a,t[10]=u*e+h*a,t[11]=s*e+r*a,t},r.rotateZ=function(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],s=n[3],c=n[4],f=n[5],h=n[6],r=n[7];n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=o*a+c*e,t[1]=i*a+f*e,t[2]=u*a+h*e,t[3]=s*a+r*e,t[4]=c*a-o*e,t[5]=f*a-i*e,t[6]=h*a-u*e,t[7]=r*a-s*e,t},r.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,n,r){var e=r[0],a=r[1],o=r[2],i=Math.hypot(e,a,o);if(i<L.EPSILON)return null;return e*=i=1/i,a*=i,o*=i,r=Math.sin(n),i=Math.cos(n),n=1-i,t[0]=e*e*n+i,t[1]=a*e*n+o*r,t[2]=o*e*n-a*r,t[3]=0,t[4]=e*a*n-o*r,t[5]=a*a*n+i,t[6]=o*a*n+e*r,t[7]=0,t[8]=e*o*n+a*r,t[9]=a*o*n-e*r,t[10]=o*o*n+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromXRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,n){var r=Math.sin(n),n=Math.cos(n);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=l,r.fromQuat2=function(t,n){var r=new L.ARRAY_TYPE(3),e=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=e*e+a*a+o*o+i*i;0<h?(r[0]=2*(u*i+f*e+s*o-c*a)/h,r[1]=2*(s*i+f*a+c*e-u*o)/h,r[2]=2*(c*i+f*o+u*a-s*e)/h):(r[0]=2*(u*i+f*e+s*o-c*a),r[1]=2*(s*i+f*a+c*e-u*o),r[2]=2*(c*i+f*o+u*a-s*e));return l(t,n,r),t},r.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},r.getScaling=p,r.getRotation=function(t,n){var r=new L.ARRAY_TYPE(3);p(r,n);var e=1/r[0],a=1/r[1],o=1/r[2],i=n[0]*e,u=n[1]*a,s=n[2]*o,c=n[4]*e,f=n[5]*a,h=n[6]*o,r=n[8]*e,e=n[9]*a,a=n[10]*o,n=i+f+a,o=0;0<n?(o=2*Math.sqrt(1+n),t[3]=.25*o,t[0]=(h-e)/o,t[1]=(r-s)/o,t[2]=(u-c)/o):f<i&&a<i?(o=2*Math.sqrt(1+i-f-a),t[3]=(h-e)/o,t[0]=.25*o,t[1]=(u+c)/o,t[2]=(r+s)/o):a<f?(o=2*Math.sqrt(1+f-i-a),t[3]=(r-s)/o,t[0]=(u+c)/o,t[1]=.25*o,t[2]=(h+e)/o):(o=2*Math.sqrt(1+a-i-f),t[3]=(u-c)/o,t[0]=(r+s)/o,t[1]=(h+e)/o,t[2]=.25*o);return t},r.fromRotationTranslationScale=function(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=n[3],s=a+a,c=o+o,f=i+i,h=a*s,l=a*c,p=a*f,n=o*c,a=o*f,o=i*f,i=u*s,s=u*c,c=u*f,u=e[0],f=e[1],e=e[2];return t[0]=(1-(n+o))*u,t[1]=(l+c)*u,t[2]=(p-s)*u,t[3]=0,t[4]=(l-c)*f,t[5]=(1-(h+o))*f,t[6]=(a+i)*f,t[7]=0,t[8]=(p+s)*e,t[9]=(a-i)*e,t[10]=(1-(h+n))*e,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,n,r,e,a){var o=n[0],i=n[1],u=n[2],s=n[3],c=o+o,f=i+i,h=u+u,l=o*c,p=o*f,M=o*h,m=i*f,d=i*h,b=u*h,y=s*c,n=s*f,o=s*h,i=e[0],u=e[1],c=e[2],f=a[0],s=a[1],h=a[2],e=(1-(m+b))*i,a=(p+o)*i,i=(M-n)*i,o=(p-o)*u,b=(1-(l+b))*u,u=(d+y)*u,n=(M+n)*c,y=(d-y)*c,c=(1-(l+m))*c;return t[0]=e,t[1]=a,t[2]=i,t[3]=0,t[4]=o,t[5]=b,t[6]=u,t[7]=0,t[8]=n,t[9]=y,t[10]=c,t[11]=0,t[12]=r[0]+f-(e*f+o*s+n*h),t[13]=r[1]+s-(a*f+b*s+y*h),t[14]=r[2]+h-(i*f+u*s+c*h),t[15]=1,t},r.fromQuat=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r+r,u=e+e,s=a+a,c=r*i,f=e*i,n=e*u,r=a*i,e=a*u,a=a*s,i=o*i,u=o*u,s=o*s;return t[0]=1-n-a,t[1]=f+s,t[2]=r-u,t[3]=0,t[4]=f-s,t[5]=1-c-a,t[6]=e+i,t[7]=0,t[8]=r+u,t[9]=e-i,t[10]=1-c-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,n,r,e,a,o,i){var u=1/(r-n),s=1/(a-e),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(a+e)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t},r.perspective=function(t,n,r,e,a){n=1/Math.tan(n/2);t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(n=1/(e-a),t[10]=(a+e)*n,t[14]=2*a*e*n):(t[10]=-1,t[14]=-2*e);return t},r.perspectiveFromFieldOfView=function(t,n,r,e){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),n=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*n*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t},r.ortho=function(t,n,r,e,a,o,i){var u=1/(n-r),s=1/(e-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*u,t[13]=(a+e)*s,t[14]=(i+o)*c,t[15]=1,t},r.lookAt=function(t,n,r,e){var a,o=n[0],i=n[1],u=n[2],s=e[0],c=e[1],f=e[2],h=r[0],l=r[1],p=r[2];if(Math.abs(o-h)<L.EPSILON&&Math.abs(i-l)<L.EPSILON&&Math.abs(u-p)<L.EPSILON)return M(t);a=o-h,n=i-l,e=u-p,r=1/Math.hypot(a,n,e),h=c*(e*=r)-f*(n*=r),l=f*(a*=r)-s*e,p=s*n-c*a,(r=Math.hypot(h,l,p))?(h*=r=1/r,l*=r,p*=r):p=l=h=0;f=n*p-e*l,s=e*h-a*p,c=a*l-n*h,(r=Math.hypot(f,s,c))?(f*=r=1/r,s*=r,c*=r):c=s=f=0;return t[0]=h,t[1]=f,t[2]=a,t[3]=0,t[4]=l,t[5]=s,t[6]=n,t[7]=0,t[8]=p,t[9]=c,t[10]=e,t[11]=0,t[12]=-(h*o+l*i+p*u),t[13]=-(f*o+s*i+c*u),t[14]=-(a*o+n*i+e*u),t[15]=1,t},r.targetTo=function(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=e[0],s=e[1],c=e[2],f=a-r[0],h=o-r[1],n=i-r[2],e=f*f+h*h+n*n;0<e&&(e=1/Math.sqrt(e),f*=e,h*=e,n*=e);r=s*n-c*h,c=c*f-u*n,s=u*h-s*f;0<(e=r*r+c*c+s*s)&&(e=1/Math.sqrt(e),r*=e,c*=e,s*=e);return t[0]=r,t[1]=c,t[2]=s,t[3]=0,t[4]=h*s-n*c,t[5]=n*r-f*s,t[6]=f*c-h*r,t[7]=0,t[8]=f,t[9]=h,t[10]=n,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},r.subtract=a,r.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},r.multiplyScalarAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],p=t[11],M=t[12],m=t[13],d=t[14],b=t[15],y=n[0],v=n[1],_=n[2],g=n[3],P=n[4],E=n[5],x=n[6],A=n[7],O=n[8],S=n[9],R=n[10],T=n[11],j=n[12],I=n[13],t=n[14],n=n[15];return Math.abs(r-y)<=L.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(e-v)<=L.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(a-_)<=L.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-g)<=L.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(i-P)<=L.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(u-E)<=L.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-x)<=L.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-A)<=L.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-O)<=L.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-S)<=L.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(l-R)<=L.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(p-T)<=L.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(M-j)<=L.EPSILON*Math.max(1,Math.abs(M),Math.abs(j))&&Math.abs(m-I)<=L.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(d-t)<=L.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(b-n)<=L.EPSILON*Math.max(1,Math.abs(b),Math.abs(n))},r.sub=r.mul=void 0;var L=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function M(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],p=n[10],M=n[11],m=n[12],d=n[13],b=n[14],y=n[15],v=r[0],_=r[1],g=r[2],n=r[3];return t[0]=v*e+_*u+g*h+n*m,t[1]=v*a+_*s+g*l+n*d,t[2]=v*o+_*c+g*p+n*b,t[3]=v*i+_*f+g*M+n*y,v=r[4],_=r[5],g=r[6],n=r[7],t[4]=v*e+_*u+g*h+n*m,t[5]=v*a+_*s+g*l+n*d,t[6]=v*o+_*c+g*p+n*b,t[7]=v*i+_*f+g*M+n*y,v=r[8],_=r[9],g=r[10],n=r[11],t[8]=v*e+_*u+g*h+n*m,t[9]=v*a+_*s+g*l+n*d,t[10]=v*o+_*c+g*p+n*b,t[11]=v*i+_*f+g*M+n*y,v=r[12],_=r[13],g=r[14],n=r[15],t[12]=v*e+_*u+g*h+n*m,t[13]=v*a+_*s+g*l+n*d,t[14]=v*o+_*c+g*p+n*b,t[15]=v*i+_*f+g*M+n*y,t}function l(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=e+e,s=a+a,c=o+o,f=e*u,h=e*s,n=e*c,e=a*s,a=a*c,o=o*c,u=i*u,s=i*s,c=i*c;return t[0]=1-(e+o),t[1]=h+c,t[2]=n-s,t[3]=0,t[4]=h-c,t[5]=1-(f+o),t[6]=a+u,t[7]=0,t[8]=n+s,t[9]=a-u,t[10]=1-(f+e),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function p(t,n){var r=n[0],e=n[1],a=n[2],o=n[4],i=n[5],u=n[6],s=n[8],c=n[9],n=n[10];return t[0]=Math.hypot(r,e,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(s,c,n),t}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}r.mul=e,r.sub=a},{"./common.js":1}],7:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=c,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=f,r.getAxisAngle=function(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);e>p.EPSILON?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0);return r},r.getAngle=function(t,n){n=y(t,n);return Math.acos(2*n*n-1)},r.multiply=h,r.rotateX=function(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],n=Math.sin(r),r=Math.cos(r);return t[0]=e*r+i*n,t[1]=a*r+o*n,t[2]=o*r-a*n,t[3]=i*r-e*n,t},r.rotateY=function(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],n=Math.sin(r),r=Math.cos(r);return t[0]=e*r-o*n,t[1]=a*r+i*n,t[2]=o*r+e*n,t[3]=i*r-a*n,t},r.rotateZ=function(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],n=Math.sin(r),r=Math.cos(r);return t[0]=e*r+a*n,t[1]=a*r-e*n,t[2]=o*r+i*n,t[3]=i*r-o*n,t},r.calculateW=function(t,n){var r=n[0],e=n[1],n=n[2];return t[0]=r,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-n*n)),t},r.exp=l,r.ln=M,r.pow=function(t,n,r){return M(t,n),b(t,t,r),l(t,t),t},r.slerp=m,r.random=function(t){var n=p.RANDOM(),r=p.RANDOM(),e=p.RANDOM(),a=Math.sqrt(1-n),n=Math.sqrt(n);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=n*Math.sin(2*Math.PI*e),t[3]=n*Math.cos(2*Math.PI*e),t},r.invert=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],n=r*r+e*e+a*a+o*o,n=n?1/n:0;return t[0]=-r*n,t[1]=-e*n,t[2]=-a*n,t[3]=o*n,t},r.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},r.fromMat3=d,r.fromEuler=function(t,n,r,e){var a=.5*Math.PI/180;n*=a,r*=a,e*=a;var o=Math.sin(n),i=Math.cos(n),a=Math.sin(r),n=Math.cos(r),r=Math.sin(e),e=Math.cos(e);return t[0]=o*n*e-i*a*r,t[1]=i*a*e+o*n*r,t[2]=i*n*r-o*a*e,t[3]=i*n*e+o*a*r,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var p=s(t("./common.js")),e=s(t("./mat3.js")),a=s(t("./vec3.js")),o=s(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((e=o?Object.getOwnPropertyDescriptor(t,r):null)&&(e.get||e.set)?Object.defineProperty(a,r,e):a[r]=t[r]);return a.default=t,n&&n.set(t,a),a}function c(){var t=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function f(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function h(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=r[0],s=r[1],n=r[2],r=r[3];return t[0]=e*r+i*u+a*n-o*s,t[1]=a*r+i*s+o*u-e*n,t[2]=o*r+i*n+e*s-a*u,t[3]=i*r-e*u-a*s-o*n,t}function l(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=Math.sqrt(r*r+e*e+a*a),n=Math.exp(o),o=0<i?n*Math.sin(i)/i:0;return t[0]=r*o,t[1]=e*o,t[2]=a*o,t[3]=n*Math.cos(i),t}function M(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],n=Math.sqrt(r*r+e*e+a*a),n=0<n?Math.atan2(n,o)/n:0;return t[0]=r*n,t[1]=e*n,t[2]=a*n,t[3]=.5*Math.log(r*r+e*e+a*a+o*o),t}function m(t,n,r,e){var a,o=n[0],i=n[1],u=n[2],s=n[3],c=r[0],f=r[1],h=r[2],l=r[3],n=o*c+i*f+u*h+s*l;return n<0&&(n=-n,c=-c,f=-f,h=-h,l=-l),e=1-n>p.EPSILON?(r=Math.acos(n),n=Math.sin(r),a=Math.sin((1-e)*r)/n,Math.sin(e*r)/n):(a=1-e,e),t[0]=a*o+e*c,t[1]=a*i+e*f,t[2]=a*u+e*h,t[3]=a*s+e*l,t}function d(t,n){var r,e,a,o=n[0]+n[4]+n[8];return 0<o?(a=Math.sqrt(o+1),t[3]=.5*a,t[0]=(n[5]-n[7])*(a=.5/a),t[1]=(n[6]-n[2])*a,t[2]=(n[1]-n[3])*a):(n[4]>n[r=0]&&(r=1),e=((r=n[8]>n[3*r+r]?2:r)+1)%3,o=(r+2)%3,a=Math.sqrt(n[3*r+r]-n[3*e+e]-n[3*o+o]+1),t[r]=.5*a,t[3]=(n[3*e+o]-n[3*o+e])*(a=.5/a),t[e]=(n[3*e+r]+n[3*r+e])*a,t[o]=(n[3*o+r]+n[3*r+o])*a),t}t=o.clone;r.clone=t;t=o.fromValues;r.fromValues=t;t=o.copy;r.copy=t;t=o.set;r.set=t;t=o.add;r.add=t,r.mul=h;var b=o.scale;r.scale=b;var y=o.dot;r.dot=y;t=o.lerp;r.lerp=t;t=o.length;r.length=t,r.len=t;t=o.squaredLength;r.squaredLength=t,r.sqrLen=t;var v=o.normalize;r.normalize=v;t=o.exactEquals;r.exactEquals=t;o=o.equals;r.equals=o;var _,g,P,o=(_=a.create(),g=a.fromValues(1,0,0),P=a.fromValues(0,1,0),function(t,n,r){var e=a.dot(n,r);return e<-.999999?(a.cross(_,g,n),a.len(_)<1e-6&&a.cross(_,P,n),a.normalize(_,_),f(t,_,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(a.cross(_,n,r),t[0]=_[0],t[1]=_[1],t[2]=_[2],t[3]=1+e,v(t,t))});r.rotationTo=o;var E,x,o=(E=c(),x=c(),function(t,n,r,e,a,o){return m(E,n,a,o),m(x,r,e,o),m(t,E,x,2*o*(1-o)),t});r.sqlerp=o;var A,e=(A=e.create(),function(t,n,r,e){return A[0]=r[0],A[3]=r[1],A[6]=r[2],A[1]=e[0],A[4]=e[1],A[7]=e[2],A[2]=-n[0],A[5]=-n[1],A[8]=-n[2],v(t,d(t,A))});r.setAxes=e},{"./common.js":1,"./mat3.js":5,"./vec3.js":10,"./vec4.js":11}],8:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new d.ARRAY_TYPE(8);d.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},r.clone=function(t){var n=new d.ARRAY_TYPE(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},r.fromValues=function(t,n,r,e,a,o,i,u){var s=new d.ARRAY_TYPE(8);return s[0]=t,s[1]=n,s[2]=r,s[3]=e,s[4]=a,s[5]=o,s[6]=i,s[7]=u,s},r.fromRotationTranslationValues=function(t,n,r,e,a,o,i){var u=new d.ARRAY_TYPE(8);u[0]=t,u[1]=n,u[2]=r,u[3]=e;a*=.5,o*=.5,i*=.5;return u[4]=a*e+o*r-i*n,u[5]=o*e+i*t-a*r,u[6]=i*e+a*n-o*t,u[7]=-a*t-o*n-i*r,u},r.fromRotationTranslation=o,r.fromTranslation=function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},r.fromRotation=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.fromMat4=function(t,n){var r=M.create();a.getRotation(r,n);var e=new d.ARRAY_TYPE(3);return a.getTranslation(e,n),o(t,r,e),t},r.copy=f,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.set=function(t,n,r,e,a,o,i,u,s){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t},r.getDual=function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},r.setDual=function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},r.getTranslation=function(t,n){var r=n[4],e=n[5],a=n[6],o=n[7],i=-n[0],u=-n[1],s=-n[2],n=n[3];return t[0]=2*(r*n+o*i+e*s-a*u),t[1]=2*(e*n+o*u+a*i-r*s),t[2]=2*(a*n+o*s+r*u-e*i),t},r.translate=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=.5*r[0],s=.5*r[1],c=.5*r[2],f=n[4],h=n[5],r=n[6],n=n[7];return t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=i*u+a*c-o*s+f,t[5]=i*s+o*u-e*c+h,t[6]=i*c+e*s-a*u+r,t[7]=-e*u-a*s-o*c+n,t},r.rotateX=function(t,n,r){var e=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=u*i+f*e+s*o-c*a,l=s*i+f*a+c*e-u*o,p=c*i+f*o+u*a-s*e,c=f*i-u*e-s*a-c*o;return M.rotateX(t,n,r),e=t[0],a=t[1],o=t[2],i=t[3],t[4]=h*i+c*e+l*o-p*a,t[5]=l*i+c*a+p*e-h*o,t[6]=p*i+c*o+h*a-l*e,t[7]=c*i-h*e-l*a-p*o,t},r.rotateY=function(t,n,r){var e=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=u*i+f*e+s*o-c*a,l=s*i+f*a+c*e-u*o,p=c*i+f*o+u*a-s*e,c=f*i-u*e-s*a-c*o;return M.rotateY(t,n,r),e=t[0],a=t[1],o=t[2],i=t[3],t[4]=h*i+c*e+l*o-p*a,t[5]=l*i+c*a+p*e-h*o,t[6]=p*i+c*o+h*a-l*e,t[7]=c*i-h*e-l*a-p*o,t},r.rotateZ=function(t,n,r){var e=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=u*i+f*e+s*o-c*a,l=s*i+f*a+c*e-u*o,p=c*i+f*o+u*a-s*e,c=f*i-u*e-s*a-c*o;return M.rotateZ(t,n,r),e=t[0],a=t[1],o=t[2],i=t[3],t[4]=h*i+c*e+l*o-p*a,t[5]=l*i+c*a+p*e-h*o,t[6]=p*i+c*o+h*a-l*e,t[7]=c*i-h*e-l*a-p*o,t},r.rotateByQuatAppend=function(t,n,r){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1],c=n[2],r=n[3];return t[0]=u*i+r*e+s*o-c*a,t[1]=s*i+r*a+c*e-u*o,t[2]=c*i+r*o+u*a-s*e,t[3]=r*i-u*e-s*a-c*o,u=n[4],s=n[5],c=n[6],r=n[7],t[4]=u*i+r*e+s*o-c*a,t[5]=s*i+r*a+c*e-u*o,t[6]=c*i+r*o+u*a-s*e,t[7]=r*i-u*e-s*a-c*o,t},r.rotateByQuatPrepend=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=r[0],s=r[1],c=r[2],n=r[3];return t[0]=e*n+i*u+a*c-o*s,t[1]=a*n+i*s+o*u-e*c,t[2]=o*n+i*c+e*s-a*u,t[3]=i*n-e*u-a*s-o*c,u=r[4],s=r[5],c=r[6],n=r[7],t[4]=e*n+i*u+a*c-o*s,t[5]=a*n+i*s+o*u-e*c,t[6]=o*n+i*c+e*s-a*u,t[7]=i*n-e*u-a*s-o*c,t},r.rotateAroundAxis=function(t,n,r,e){if(Math.abs(e)<d.EPSILON)return f(t,n);var a=Math.hypot(r[0],r[1],r[2]);e*=.5;var o=Math.sin(e),i=o*r[0]/a,u=o*r[1]/a,s=o*r[2]/a,c=Math.cos(e),o=n[0],r=n[1],a=n[2],e=n[3];t[0]=o*c+e*i+r*s-a*u,t[1]=r*c+e*u+a*i-o*s,t[2]=a*c+e*s+o*u-r*i,t[3]=e*c-o*i-r*u-a*s;o=n[4],r=n[5],a=n[6],n=n[7];return t[4]=o*c+n*i+r*s-a*u,t[5]=r*c+n*u+a*i-o*s,t[6]=a*c+n*s+o*u-r*i,t[7]=n*c-o*i-r*u-a*s,t},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t},r.multiply=s,r.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t},r.lerp=function(t,n,r,e){var a=1-e;c(n,r)<0&&(e=-e);return t[0]=n[0]*a+r[0]*e,t[1]=n[1]*a+r[1]*e,t[2]=n[2]*a+r[2]*e,t[3]=n[3]*a+r[3]*e,t[4]=n[4]*a+r[4]*e,t[5]=n[5]*a+r[5]*e,t[6]=n[6]*a+r[6]*e,t[7]=n[7]*a+r[7]*e,t},r.invert=function(t,n){var r=h(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t},r.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},r.normalize=function(t,n){var r=h(n);{var e,a,o,i,u,s,c,f;0<r&&(r=Math.sqrt(r),e=n[0]/r,a=n[1]/r,o=n[2]/r,i=n[3]/r,u=n[4],s=n[5],c=n[6],f=n[7],n=e*u+a*s+o*c+i*f,t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=(u-e*n)/r,t[5]=(s-a*n)/r,t[6]=(c-o*n)/r,t[7]=(f-i*n)/r)}return t},r.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=n[0],h=n[1],l=n[2],p=n[3],M=n[4],m=n[5],t=n[6],n=n[7];return Math.abs(r-f)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(a-l)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-p)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-M)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-m)<=d.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-t)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(t))&&Math.abs(c-n)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))},r.sqrLen=r.squaredLength=r.len=r.length=r.dot=r.mul=r.setReal=r.getReal=void 0;var d=e(t("./common.js")),M=e(t("./quat.js")),a=e(t("./mat4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((e=o?Object.getOwnPropertyDescriptor(t,r):null)&&(e.get||e.set)?Object.defineProperty(a,r,e):a[r]=t[r]);return a.default=t,n&&n.set(t,a),a}function o(t,n,r){var e=.5*r[0],a=.5*r[1],o=.5*r[2],i=n[0],u=n[1],r=n[2],n=n[3];return t[0]=i,t[1]=u,t[2]=r,t[3]=n,t[4]=e*n+a*r-o*u,t[5]=a*n+o*i-e*r,t[6]=o*n+e*u-a*i,t[7]=-e*i-a*u-o*r,t}function f(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}t=M.copy;r.getReal=t;t=M.copy;function s(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=r[4],s=r[5],c=r[6],f=r[7],h=n[4],l=n[5],p=n[6],M=n[7],m=r[0],d=r[1],n=r[2],r=r[3];return t[0]=e*r+i*m+a*n-o*d,t[1]=a*r+i*d+o*m-e*n,t[2]=o*r+i*n+e*d-a*m,t[3]=i*r-e*m-a*d-o*n,t[4]=e*f+i*u+a*c-o*s+h*r+M*m+l*n-p*d,t[5]=a*f+i*s+o*u-e*c+l*r+M*d+p*m-h*n,t[6]=o*f+i*c+e*s-a*u+p*r+M*n+h*d-l*m,t[7]=i*f-e*u-a*s-o*c+M*r-h*m-l*d-p*n,t}r.setReal=t,r.mul=s;var c=M.dot;r.dot=c;t=M.length;r.length=t,r.len=t;var h=M.squaredLength;r.squaredLength=h,r.sqrLen=h},{"./common.js":1,"./mat4.js":6,"./quat.js":7}],9:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=e,r.clone=function(t){var n=new a.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},r.fromValues=function(t,n){var r=new a.ARRAY_TYPE(2);return r[0]=t,r[1]=n,r},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},r.set=function(t,n,r){return t[0]=n,t[1]=r,t},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},r.subtract=o,r.multiply=s,r.divide=c,r.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},r.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},r.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},r.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},r.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},r.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},r.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},r.distance=f,r.squaredDistance=h,r.length=l,r.squaredLength=p,r.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},r.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},r.normalize=function(t,n){var r=n[0],e=n[1],e=r*r+e*e;0<e&&(e=1/Math.sqrt(e));return t[0]=n[0]*e,t[1]=n[1]*e,t},r.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},r.cross=function(t,n,r){r=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=r,t},r.lerp=function(t,n,r,e){var a=n[0],n=n[1];return t[0]=a+e*(r[0]-a),t[1]=n+e*(r[1]-n),t},r.random=function(t,n){n=n||1;var r=2*a.RANDOM()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},r.transformMat2=function(t,n,r){var e=n[0],n=n[1];return t[0]=r[0]*e+r[2]*n,t[1]=r[1]*e+r[3]*n,t},r.transformMat2d=function(t,n,r){var e=n[0],n=n[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t},r.transformMat3=function(t,n,r){var e=n[0],n=n[1];return t[0]=r[0]*e+r[3]*n+r[6],t[1]=r[1]*e+r[4]*n+r[7],t},r.transformMat4=function(t,n,r){var e=n[0],n=n[1];return t[0]=r[0]*e+r[4]*n+r[12],t[1]=r[1]*e+r[5]*n+r[13],t},r.rotate=function(t,n,r,e){var a=n[0]-r[0],o=n[1]-r[1],n=Math.sin(e),e=Math.cos(e);return t[0]=a*e-o*n+r[0],t[1]=a*n+o*e+r[1],t},r.angle=function(t,n){var r=t[0],e=t[1],a=n[0],t=n[1],n=Math.sqrt(r*r+e*e)*Math.sqrt(a*a+t*t),n=n&&(r*a+e*t)/n;return Math.acos(Math.min(Math.max(n,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},r.equals=function(t,n){var r=t[0],e=t[1],t=n[0],n=n[1];return Math.abs(r-t)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(e-n)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))},r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(){var t=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function s(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function c(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function f(t,n){var r=n[0]-t[0],t=n[1]-t[1];return Math.hypot(r,t)}function h(t,n){var r=n[0]-t[0],t=n[1]-t[1];return r*r+t*t}function l(t){var n=t[0],t=t[1];return Math.hypot(n,t)}function p(t){var n=t[0],t=t[1];return n*n+t*t}r.len=l,r.sub=o,r.mul=s,r.div=c,r.dist=f,r.sqrDist=h,r.sqrLen=p;var M,t=(M=e(),function(t,n,r,e,a,o){var i,u;for(n=n||2,r=r||0,u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)M[0]=t[i],M[1]=t[i+1],a(M,M,o),t[i]=M[0],t[i+1]=M[1];return t});r.forEach=t},{"./common.js":1}],10:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=e,r.clone=function(t){var n=new u.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},r.length=a,r.fromValues=function(t,n,r){var e=new u.ARRAY_TYPE(3);return e[0]=t,e[1]=n,e[2]=r,e},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},r.set=function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},r.subtract=o,r.multiply=c,r.divide=f,r.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},r.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},r.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},r.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},r.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},r.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},r.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},r.distance=h,r.squaredDistance=l,r.squaredLength=p,r.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},r.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},r.normalize=function(t,n){var r=n[0],e=n[1],a=n[2],a=r*r+e*e+a*a;0<a&&(a=1/Math.sqrt(a));return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t},r.dot=M,r.cross=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=r[0],n=r[1],r=r[2];return t[0]=a*r-o*n,t[1]=o*i-e*r,t[2]=e*n-a*i,t},r.lerp=function(t,n,r,e){var a=n[0],o=n[1],n=n[2];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=n+e*(r[2]-n),t},r.hermite=function(t,n,r,e,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),o=i*(3-2*o);return t[0]=n[0]*u+r[0]*s+e[0]*c+a[0]*o,t[1]=n[1]*u+r[1]*s+e[1]*c+a[1]*o,t[2]=n[2]*u+r[2]*s+e[2]*c+a[2]*o,t},r.bezier=function(t,n,r,e,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,u=3*o*u,i=3*s*i,o=s*o;return t[0]=n[0]*c+r[0]*u+e[0]*i+a[0]*o,t[1]=n[1]*c+r[1]*u+e[1]*i+a[1]*o,t[2]=n[2]*c+r[2]*u+e[2]*i+a[2]*o,t},r.random=function(t,n){n=n||1;var r=2*u.RANDOM()*Math.PI,e=2*u.RANDOM()-1,a=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=e*n,t},r.transformMat4=function(t,n,r){var e=n[0],a=n[1],o=n[2],n=r[3]*e+r[7]*a+r[11]*o+r[15];return n=n||1,t[0]=(r[0]*e+r[4]*a+r[8]*o+r[12])/n,t[1]=(r[1]*e+r[5]*a+r[9]*o+r[13])/n,t[2]=(r[2]*e+r[6]*a+r[10]*o+r[14])/n,t},r.transformMat3=function(t,n,r){var e=n[0],a=n[1],n=n[2];return t[0]=e*r[0]+a*r[3]+n*r[6],t[1]=e*r[1]+a*r[4]+n*r[7],t[2]=e*r[2]+a*r[5]+n*r[8],t},r.transformQuat=function(t,n,r){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1],c=n[2],f=a*c-o*s,h=o*u-e*c,r=e*s-a*u,n=a*r-o*h,o=o*f-e*r,a=e*h-a*f,i=2*i;return f*=i,h*=i,r*=i,n*=2,o*=2,a*=2,t[0]=u+f+n,t[1]=s+h+o,t[2]=c+r+a,t},r.rotateX=function(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),o[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},r.rotateY=function(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),o[1]=a[1],o[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},r.rotateZ=function(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),o[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},r.angle=function(t,n){var r=t[0],e=t[1],a=t[2],o=n[0],i=n[1],u=n[2],a=Math.sqrt(r*r+e*e+a*a),u=Math.sqrt(o*o+i*i+u*u),u=a*u,u=u&&M(t,n)/u;return Math.acos(Math.min(Math.max(u,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=n[0],t=n[1],n=n[2];return Math.abs(r-o)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-t)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(a-n)<=u.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=s();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function e(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var n=t[0],r=t[1],t=t[2];return Math.hypot(n,r,t)}function o(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function c(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function f(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function h(t,n){var r=n[0]-t[0],e=n[1]-t[1],t=n[2]-t[2];return Math.hypot(r,e,t)}function l(t,n){var r=n[0]-t[0],e=n[1]-t[1],t=n[2]-t[2];return r*r+e*e+t*t}function p(t){var n=t[0],r=t[1],t=t[2];return n*n+r*r+t*t}function M(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}r.sub=o,r.mul=c,r.div=f,r.dist=h,r.sqrDist=l,r.len=a,r.sqrLen=p;var m,t=(m=e(),function(t,n,r,e,a,o){var i,u;for(n=n||3,r=r||0,u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)m[0]=t[i],m[1]=t[i+1],m[2]=t[i+2],a(m,m,o),t[i]=m[0],t[i+1]=m[1],t[i+2]=m[2];return t});r.forEach=t},{"./common.js":1}],11:[function(t,n,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=e,r.clone=function(t){var n=new c.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},r.fromValues=function(t,n,r,e){var a=new c.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a},r.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},r.set=function(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t},r.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},r.subtract=a,r.multiply=o,r.divide=s,r.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},r.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},r.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},r.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},r.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},r.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},r.scaleAndAdd=function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},r.distance=f,r.squaredDistance=h,r.length=l,r.squaredLength=p,r.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},r.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},r.normalize=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],n=r*r+e*e+a*a+o*o;0<n&&(n=1/Math.sqrt(n));return t[0]=r*n,t[1]=e*n,t[2]=a*n,t[3]=o*n,t},r.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},r.cross=function(t,n,r,e){var a=r[0]*e[1]-r[1]*e[0],o=r[0]*e[2]-r[2]*e[0],i=r[0]*e[3]-r[3]*e[0],u=r[1]*e[2]-r[2]*e[1],s=r[1]*e[3]-r[3]*e[1],c=r[2]*e[3]-r[3]*e[2],f=n[0],r=n[1],e=n[2],n=n[3];return t[0]=r*c-e*s+n*u,t[1]=-f*c+e*i-n*o,t[2]=f*s-r*i+n*a,t[3]=-f*u+r*o-e*a,t},r.lerp=function(t,n,r,e){var a=n[0],o=n[1],i=n[2],n=n[3];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=i+e*(r[2]-i),t[3]=n+e*(r[3]-n),t},r.random=function(t,n){var r,e,a,o,i,u;n=n||1;for(;r=2*c.RANDOM()-1,e=2*c.RANDOM()-1,i=r*r+e*e,1<=i;);for(;a=2*c.RANDOM()-1,o=2*c.RANDOM()-1,u=a*a+o*o,1<=u;);var s=Math.sqrt((1-i)/u);return t[0]=n*r,t[1]=n*e,t[2]=n*a*s,t[3]=n*o*s,t},r.transformMat4=function(t,n,r){var e=n[0],a=n[1],o=n[2],n=n[3];return t[0]=r[0]*e+r[4]*a+r[8]*o+r[12]*n,t[1]=r[1]*e+r[5]*a+r[9]*o+r[13]*n,t[2]=r[2]*e+r[6]*a+r[10]*o+r[14]*n,t[3]=r[3]*e+r[7]*a+r[11]*o+r[15]*n,t},r.transformQuat=function(t,n,r){var e=n[0],a=n[1],o=n[2],i=r[0],u=r[1],s=r[2],c=r[3],f=c*e+u*o-s*a,h=c*a+s*e-i*o,r=c*o+i*a-u*e,o=-i*e-u*a-s*o;return t[0]=f*c+o*-i+h*-s-r*-u,t[1]=h*c+o*-u+r*-i-f*-s,t[2]=r*c+o*-s+f*-u-h*-i,t[3]=n[3],t},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},r.equals=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=n[0],u=n[1],t=n[2],n=n[3];return Math.abs(r-i)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=c.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-t)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(o-n)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(n))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u();if(n&&n.has(t))return n.get(t);var r,e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var o;Object.prototype.hasOwnProperty.call(t,r)&&((o=a?Object.getOwnPropertyDescriptor(t,r):null)&&(o.get||o.set)?Object.defineProperty(e,r,o):e[r]=t[r])}e.default=t,n&&n.set(t,e);return e}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function e(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function a(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function o(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function s(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function f(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],t=n[3]-t[3];return Math.hypot(r,e,a,t)}function h(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2],t=n[3]-t[3];return r*r+e*e+a*a+t*t}function l(t){var n=t[0],r=t[1],e=t[2],t=t[3];return Math.hypot(n,r,e,t)}function p(t){var n=t[0],r=t[1],e=t[2],t=t[3];return n*n+r*r+e*e+t*t}r.sub=a,r.mul=o,r.div=s,r.dist=f,r.sqrDist=h,r.len=l,r.sqrLen=p;var M,t=(M=e(),function(t,n,r,e,a,o){var i,u;for(n=n||4,r=r||0,u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)M[0]=t[i],M[1]=t[i+1],M[2]=t[i+2],M[3]=t[i+3],a(M,M,o),t[i]=M[0],t[i+1]=M[1],t[i+2]=M[2],t[i+3]=M[3];return t});r.forEach=t},{"./common.js":1}],12:[function(t,n,r){"use strict";function e(t){var n=a().gl;this._glBuffer=n.createBuffer(),this._count=0,this._vertices=[],this.style=n.ARRAY_BUFFER,this.arrayType=Float32Array,this.indices=!1,t&&(this.indices=!0,this.style=n.ELEMENT_ARRAY_BUFFER,this.arrayType=Uint16Array)}var a=t("./context").ctx;e.prototype.add=function(t){for(var n=0;n<t.length;n++)this._vertices.push.apply(this._vertices,t[n])},e.prototype.addFlat=function(t){this._vertices.push.apply(this._vertices,t)},e.prototype.addIdx=function(t,n){for(var r=0;r<n.length;r++)this._vertices.push.apply(this._vertices,t[n[r]])},e.prototype.addFlatIdx=function(t,n){for(var r=0;r<n.length;r++)this._vertices.push(t[n[r]])},e.prototype.addN=function(t,n){for(var r=0;r<n;r++)this._vertices.push.apply(this._vertices,t)},e.prototype.commit=function(t){var n=a().gl,r=n.STATIC_DRAW;t&&(r=n.DYNAMIC_DRAW),n.bindBuffer(this.style,this._glBuffer),n.bufferData(this.style,new this.arrayType(this._vertices),r),this._count=this._vertices.length},e.prototype.bind=function(t){var n=a().gl,t=a().shaderInUse.attributes[t];if(this.indices||n.enableVertexAttribArray(t.handler),n.bindBuffer(this.style,this._glBuffer),!this.indices)return n.vertexAttribPointer(t.handler,t.size,n.FLOAT,!1,0,0),this._count/t.size},e.prototype.delete=function(){a().gl.deleteBuffer(this._glBuffer)};t=function(t){this._vao=a().gl.createVertexArray(),this._buffers={},this._indexBuffer=null;for(var n=this._count=0;n<t.length;n++)this._buffers[t[n]]=new e};t.prototype.buff=function(t){return this._buffers[t]},t.prototype.setIndices=function(t){this._indexBuffer=new e(!0),this._indexBuffer.addFlat(t),this._indexBuffer.commit()},t.prototype.commit=function(t){var n,r=a().gl;for(n in this._buffers)this._buffers[n].commit(t);for(n in r.bindVertexArray(this._vao),this._buffers)this._count=this._buffers[n].bind(n);r.bindVertexArray(null)},t.prototype.draw=function(){var t=a().gl;t.bindVertexArray(this._vao),this._indexBuffer?(this._indexBuffer.bind(),t.drawElements(t.TRIANGLES,this._indexBuffer._count,t.UNSIGNED_SHORT,0)):t.drawArrays(t.TRIANGLES,0,this._count),t.bindVertexArray(null)},t.prototype.delete=function(){for(var t in this._buffers)this._buffers[t].delete();this._buffers={},a().gl.deleteVertexArray(this._vao),this._vao=null,this._count=0},n.exports={Buffer:e,BufferArray:t}},{"./context":14}],13:[function(t,n,r){"use strict";var e=t("gl-matrix").mat4,a=t("./context").ctx,o=t("./graph"),t=function(t){this._stagingViewMat=e.create(),this._uniformName=t,this.node=new o.GraphNode(new o.Transform)};t.prototype.expose=function(){e.invert(this._stagingViewMat,this.node.getBubbledMat()),a().shaderInUse.uniforms[this._uniformName](!1,this._stagingViewMat)},t.prototype.screenTo2dWorld=function(t){return[t[0]+this.node.transform.tX,t[1]+this.node.transform.tY]},t.prototype.world2dPos=function(){return[this.node.transform.tX,this.node.transform.tY]},n.exports=t},{"./context":14,"./graph":15,"gl-matrix":2}],14:[function(t,n,r){"use strict";function e(t){var n;this.canvas=document.getElementById(t);try{n=this.canvas.getContext("webgl2")}catch(t){alert("Could not initialise WebGL, sorry :-(")}n||alert("Could not initialise WebGL, sorry :-("),this.gl=n,this.shaderInUse=null,this.resizeCallbacks=[],this.globs={},this.focused=!1,this._setFlags(),this._prepareGlobs(),this._listen(),this.pointerX=0,this.pointerY=0,a=this}var a=null;e.prototype._setFlags=function(){var t=this.gl;t.clearColor(0,0,0,1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.DEPTH_TEST)},e.prototype._prepareGlobs=function(){var t=this.gl,n=this.globs;n.unifMap={},n.unifMap[t.INT]=t.uniform1i,n.unifMap[t.FLOAT]=t.uniform1f,n.unifMap[t.FLOAT_VEC2]=t.uniform2fv,n.unifMap[t.FLOAT_VEC3]=t.uniform3fv,n.unifMap[t.FLOAT_VEC4]=t.uniform4fv,n.unifMap[t.INT_VEC2]=t.uniform2iv,n.unifMap[t.INT_VEC3]=t.uniform3iv,n.unifMap[t.INT_VEC4]=t.uniform4iv,n.unifMap[t.FLOAT_MAT2]=t.uniformMatrix2fv,n.unifMap[t.FLOAT_MAT3]=t.uniformMatrix3fv,n.unifMap[t.FLOAT_MAT4]=t.uniformMatrix4fv,n.unifMap[t.SAMPLER_2D]=t.uniform1i,n.attrMap={},n.attrMap[t.FLOAT]=1,n.attrMap[t.FLOAT_VEC2]=2,n.attrMap[t.FLOAT_VEC3]=3,n.attrMap[t.FLOAT_VEC4]=4,this.globs.conf={},this.globs.conf.halfScreen=10},e.prototype._listen=function(){document.addEventListener("focus",this._onFocus.bind(this)),document.addEventListener("blur",this._onBlur.bind(this)),document.addEventListener("mousemove",this._onMouse.bind(this)),document.hasFocus()&&this._onFocus()},e.prototype.resizeIfNeeded=function(){var t=this.canvas.clientWidth,n=this.canvas.clientHeight,r=this.gl;this.canvas.width===t&&this.canvas.height===n||(this.canvas.width=t,this.canvas.height=n,this.resizeCallbacks.forEach(function(t){t()}),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight))},e.prototype.clear=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},e.prototype._onFocus=function(){this.focused=!0},e.prototype._onBlur=function(){this.focused=!1},e.prototype._onMouse=function(t){this.pointerX=t.clientX,this.pointerY=t.clientY};n.exports={Context:e,ctx:function(){return a}}},{}],15:[function(t,n,r){"use strict";function e(){this.tX=0,this.tY=0,this.tZ=0,this.rX=0,this.rY=0,this.rZ=0,this.sX=1,this.sY=1,this.sZ=1,this.transformMat=a.create(),this.rotationQuat=o.create()}var a=t("gl-matrix").mat4,o=t("gl-matrix").quat;e.prototype.refresh=function(){var t=this.rotationQuat;o.identity(t),o.rotateX(t,t,this.rX),o.rotateY(t,t,this.rY),o.rotateZ(t,t,this.rZ),a.fromRotationTranslationScale(this.transformMat,t,[this.tX,this.tY,this.tZ],[this.sX,this.sY,this.sZ])};t=function(t){this.transform=t,this.parent=null,this.stagingMat=a.create()};t.prototype.getBubbledMat=function(){return a.identity(this.stagingMat),this.parent?a.multiply(this.stagingMat,this.parent.getBubbledMat(),this.transform.transformMat):a.multiply(this.stagingMat,this.stagingMat,this.transform.transformMat),this.stagingMat},n.exports={GraphNode:t,Transform:e}},{"gl-matrix":2}],16:[function(t,n,r){"use strict";var e=t("./buffer"),a=t("./camera"),o=t("./projection"),i=t("./shaders"),u=t("./context"),s=t("./texture"),c=t("./graph"),f=t("./motion"),h=t("./input"),l=t("./primitives"),t=t("./m2d");n.exports={buffers:e,Camera:a,Projection:o,Shader:i,context:u,Texture:s,graph:c,motion:f,input:h,primitives:l,m2d:t}},{"./buffer":12,"./camera":13,"./context":14,"./graph":15,"./input":17,"./m2d":18,"./motion":19,"./primitives":20,"./projection":21,"./shaders":22,"./texture":23}],17:[function(t,n,r){"use strict";var e=t("./context").ctx,t=function(){this.keystates={},this.boundKeyup=this.keyup.bind(this),this.boundKeydown=this.keydown.bind(this)};t.prototype.keyup=function(t){this.keystates[t.code]=!0},t.prototype.keydown=function(t){this.keystates[t.code]&&(this.keystates[t.code]=!1)},t.prototype.keyChecker=function(t){return this.isPressed.bind(this,t)},t.prototype.eventKeyChecker=function(t){var n=!1;return function(t){if(this.isPressed(t)){if(!n)return n=!0}else n=!1;return!1}.bind(this,t)},t.prototype.releaseKeyChecker=function(t){var n=!1;return function(t){return this.isPressed(t)?!(n=!0):!!n&&!(n=!1)}.bind(this,t)},t.prototype.isPressed=function(t){return!!this.keystates[t]&&(!!e().focused||(this.keystates[t]=!1))},t.prototype.listen=function(){document.addEventListener("keydown",this.boundKeyup,!1),document.addEventListener("keyup",this.boundKeydown,!1)},t.prototype.stopListening=function(){document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler)},n.exports={KeyboardState:t}},{"./context":14}],18:[function(t,n,r){"use strict";function o(t,n){return[n[0]+t[0],n[1]+t[1]]}function i(t,n){return[n[0]-t[0],n[1]-t[1]]}function u(t,n){return t[0]*n[1]-t[1]*n[0]}function s(t,n){return[n*t[0],n*t[1]]}function e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}n.exports={sum:o,diff:i,cross:u,intersection:function(t,n,r,e){var a=i(t,n),n=i(r,e),e=u(a,n);return o(t,s(a,u(i(t,r),n)/e))},dot:function(t,n){return t[0]*n[0]+t[1]*n[1]},perp:function(t){return[-t[1],t[0]]},mid:function(t,n){return n=i(t,n),[t[0]+n[0]/2,t[1]+n[1]/2]},neg:function(t){return[-t[0],-t[1]]},scale:s,length:e,norm:function(t,n){return s(t,(n=n||1)/e(t))}}},{}],19:[function(t,n,r){"use strict";function e(t,n,r,e){this.running=e||!1,this._wasRunning=!1,this.startTs=0,this.previousTs=0,this.idx=0,this.previousPayload=null,this.name=t,this.callback=n,r&&(this.stateChecker=r)}e.prototype.stateChecker=function(){return this.running},e.prototype.nowGetter=function(){return performance.now()},e.prototype.tick=function(t){t=t||this.nowGetter(),this._wasRunning||(this.previousPayload=null,this.startTs=t,this.previousTs=t,this.idx=0);var n=t-this.previousTs;this.stateChecker(this.name,n,this.idx,t,this.startTs,this.previousPayload)?(this._wasRunning=!0,this.previousPayload=this.callback(this.name,n,this.idx,t,this.startTs,this.previousPayload),this.idx++,this.previousTs=t):this._wasRunning=!1},n.exports={slowdownWrapper:function(i,u){var s=0,c=0;return function(t,n,r,e,a,o){u<r-s&&(i(t,c,r,e,s,o),c++,s=r)}},Motion:e,ticker:function(t){return function(n){t.forEach(function(t){t.tick(n)})}},lerper:function(h,l,p){return function(t,n,r,e,a,o){if(0===r){t=h(t);return"from"in t&&"to"in t||console.error("lerper is missing infos !"),t}e-=a;if((e=p-20<=e?p:e)<=p){for(var i=e/p,u=[],s=0;s<o.from.length;s++){var c=o.from[s],f=o.to[s];u.push(c+(f-c)*i)}a=l(u);return e!==p&&a?o:null}return null}},tillStop:function(i){var u=!1;return function(t,n,r,e,a,o){return u=!(!i(t,n,r,e,a,o)||u)||!(!u||!o)}},tillOther:function(u,s){var c=!1;return function(t,n,r,e,a,o){var i=u(t,n,r,e,a,o),a=s(t,n,r,e,a,o);return c=!(!i||c)||!a&&!(!c||!o)}},averager:function(o){var i=[];return function(t){i.push(t),i.length>o&&i.shift();for(var n,r,e=[],a=0;a<t.length;a++){for(r=n=0;r<i.length;r++)n+=i[r][a];e.push(n/i.length)}return e}}}},{}],20:[function(t,n,r){"use strict";n.exports={shapes:{planar:{Circle:function(t,n){for(var r,e,a=2*Math.PI/n,o=0,i=[],u=n,s=[];u--;)i.push([t*Math.cos(o),t*Math.sin(o)]),o+=a;for(u=0;u<n;u++)r=i[u],e=i[(u+1)%n],s.push([0,0],r,e);return s},Square:function(){},Oval:function(){},Triangle:function(){}},spatial:{Sphere:function(){},Cube:function(){},Pill:function(){},Pyramid:function(){}}},paths:{}}},{}],21:[function(t,n,r){"use strict";var a=t("gl-matrix").mat4,o=t("./context").ctx,t=function(t){this._projMat=a.create(),this._uniformName=t,this.halfScreenWidth=o().globs.conf.halfScreen};t.prototype.ortho=function(t){var n=o();t=t||this.halfScreenWidth;n=(this.halfScreenWidth=t)*(n.canvas.height/n.canvas.width);a.ortho(this._projMat,-t,t,-n,n,-10,10)},t.prototype.getPointerPos=function(){var t=o(),n=2*this.halfScreenWidth/t.canvas.width;return[(t.pointerX-t.canvas.width/2)*n,-(t.pointerY-t.canvas.height/2)*n]},t.prototype.perspective=function(t,n,r){var e=o(),e=e.canvas.width/e.canvas.height;a.perspective(this._projMat,t=t||1.5708,e,n=n||.1,r=r||10)},t.prototype.expose=function(){o().shaderInUse.uniforms[this._uniformName](!1,this._projMat)},n.exports=t},{"./context":14,"gl-matrix":2}],22:[function(t,n,r){"use strict";var u=t("./context").ctx,a=/(\w+)\[?(\d+)?\]?\.?(\w+)?/,t=function(){this.attributes={},this.uniforms={},this._program=null};t.prototype._getShader=function(t,n){var r=u().gl,n=r.createShader(n);return r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?n:(alert(r.getShaderInfoLog(n)),null)},t.prototype._createUnifCallable=function(t){var n=u();return n.globs.unifMap[t.type].bind(n.gl,n.gl.getUniformLocation(this._program,t.name))},t.prototype._insertCallable=function(t,n){var r=a.exec(t.name),e=r[1],t=r[2],r=r[3];t?(this.uniforms[e]||(this.uniforms[e]=[]),r?(this.uniforms[e][t]||(this.uniforms[e][t]={}),this.uniforms[e][t][r]=n):this.uniforms[e][t]=n):r?(this.uniforms[e]||(this.uniforms[e]={}),this.uniforms[e][r]=n):this.uniforms[e]=n},t.prototype._parseUniforms=function(){for(var t,n,r=u().gl,e=this._program,a=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),o=0;o<a;o++)n=r.getActiveUniform(e,o),t=this._createUnifCallable(n),this._insertCallable(n,t)},t.prototype._parseAttributes=function(){for(var t=u(),n=t.gl,r=this._program,e=n.getProgramParameter(r,n.ACTIVE_ATTRIBUTES),a=0;a<e;a++){var o=n.getActiveAttrib(r,a),i=n.getAttribLocation(r,o.name);this.attributes[o.name]={size:t.globs.attrMap[o.type],handler:i}}},t.prototype.init=function(t,n){var r=u().gl,e=this._getShader(t,r.VERTEX_SHADER),t=this._getShader(n,r.FRAGMENT_SHADER),n=r.createProgram();this._program=n,r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||alert("Could not initialise shaders"),this._parseUniforms(),this._parseAttributes(),r.useProgram(n)},t.prototype.use=function(){var t=u();t.gl.useProgram(this._program),t.shaderInUse=this},n.exports=t},{"./context":14}],23:[function(t,n,r){"use strict";function e(){this._glTexture=a().gl.createTexture(),this._image=new Image,this._image.onload=this._onload.bind(this),this._poolGet()}var a=t("./context").ctx;e.usedTexturesIdx=[],e.prototype._poolGet=function(){for(var t=null,n=0;n<e.usedTexturesIdx.length;n++)if(!e.usedTexturesIdx[n]){e.usedTexturesIdx[n]=!0,t=n;break}null===t&&(t=e.usedTexturesIdx.push(!0)-1),this.texIdx=n,this._texIdentifier=a().gl["TEXTURE"+n]},e.prototype._poolRelease=function(){e.usedTexturesIdx[this.texIdx]=!1,this.texIdx=null,this._texIdentifier=null},e.prototype.free=function(){this._image.src="",this._poolRelease()},e.prototype.load=function(t,n){this._image.src=t,this._loadCb=n},e.prototype._onload=function(){var t=a().gl;t.bindTexture(t.TEXTURE_2D,this._glTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),this._loadCb&&this._loadCb()},e.prototype.enable=function(){var t=a().gl;t.activeTexture(this._texIdentifier),t.bindTexture(t.TEXTURE_2D,this._glTexture)},n.exports=e},{"./context":14}],24:[function(t,n,r){"use strict";t=t("./index.js");window.wiggle=t},{"./index.js":16}]},{},[24]);